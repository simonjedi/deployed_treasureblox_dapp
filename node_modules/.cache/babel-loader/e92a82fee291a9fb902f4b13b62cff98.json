{"ast":null,"code":"var MD5 = function (string) {\n  function RotateLeft(lValue, iShiftBits) {\n    return lValue << iShiftBits | lValue >>> 32 - iShiftBits;\n  }\n\n  function AddUnsigned(lX, lY) {\n    var lX4, lY4, lX8, lY8, lResult;\n    lX8 = lX & 0x80000000;\n    lY8 = lY & 0x80000000;\n    lX4 = lX & 0x40000000;\n    lY4 = lY & 0x40000000;\n    lResult = (lX & 0x3fffffff) + (lY & 0x3fffffff);\n\n    if (lX4 & lY4) {\n      return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n    }\n\n    if (lX4 | lY4) {\n      if (lResult & 0x40000000) {\n        return lResult ^ 0xc0000000 ^ lX8 ^ lY8;\n      } else {\n        return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n      }\n    } else {\n      return lResult ^ lX8 ^ lY8;\n    }\n  }\n\n  function F(x, y, z) {\n    return x & y | ~x & z;\n  }\n\n  function G(x, y, z) {\n    return x & z | y & ~z;\n  }\n\n  function H(x, y, z) {\n    return x ^ y ^ z;\n  }\n\n  function I(x, y, z) {\n    return y ^ (x | ~z);\n  }\n\n  function FF(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function GG(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function HH(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function II(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function ConvertToWordArray(string) {\n    var lWordCount;\n    var lMessageLength = string.length;\n    var lNumberOfWords_temp1 = lMessageLength + 8;\n    var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;\n    var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n    var lWordArray = Array(lNumberOfWords - 1);\n    var lBytePosition = 0;\n    var lByteCount = 0;\n\n    while (lByteCount < lMessageLength) {\n      lWordCount = (lByteCount - lByteCount % 4) / 4;\n      lBytePosition = lByteCount % 4 * 8;\n      lWordArray[lWordCount] = lWordArray[lWordCount] | string.charCodeAt(lByteCount) << lBytePosition;\n      lByteCount++;\n    }\n\n    lWordCount = (lByteCount - lByteCount % 4) / 4;\n    lBytePosition = lByteCount % 4 * 8;\n    lWordArray[lWordCount] = lWordArray[lWordCount] | 0x80 << lBytePosition;\n    lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n    lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n    return lWordArray;\n  }\n\n  function WordToHex(lValue) {\n    var WordToHexValue = \"\",\n        WordToHexValue_temp = \"\",\n        lByte,\n        lCount;\n\n    for (lCount = 0; lCount <= 3; lCount++) {\n      lByte = lValue >>> lCount * 8 & 255;\n      WordToHexValue_temp = \"0\" + lByte.toString(16);\n      WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n    }\n\n    return WordToHexValue;\n  }\n\n  function Utf8Encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if (c > 127 && c < 2048) {\n        utftext += String.fromCharCode(c >> 6 | 192);\n        utftext += String.fromCharCode(c & 63 | 128);\n      } else {\n        utftext += String.fromCharCode(c >> 12 | 224);\n        utftext += String.fromCharCode(c >> 6 & 63 | 128);\n        utftext += String.fromCharCode(c & 63 | 128);\n      }\n    }\n\n    return utftext;\n  }\n\n  var x = Array();\n  var k, AA, BB, CC, DD, a, b, c, d;\n  var S11 = 7,\n      S12 = 12,\n      S13 = 17,\n      S14 = 22;\n  var S21 = 5,\n      S22 = 9,\n      S23 = 14,\n      S24 = 20;\n  var S31 = 4,\n      S32 = 11,\n      S33 = 16,\n      S34 = 23;\n  var S41 = 6,\n      S42 = 10,\n      S43 = 15,\n      S44 = 21;\n  string = Utf8Encode(string);\n  x = ConvertToWordArray(string);\n  a = 0x67452301;\n  b = 0xefcdab89;\n  c = 0x98badcfe;\n  d = 0x10325476;\n\n  for (k = 0; k < x.length; k += 16) {\n    AA = a;\n    BB = b;\n    CC = c;\n    DD = d;\n    a = FF(a, b, c, d, x[k + 0], S11, 0xd76aa478);\n    d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);\n    c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);\n    b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);\n    a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);\n    d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);\n    c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);\n    b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);\n    a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);\n    d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);\n    c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);\n    b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);\n    a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);\n    d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);\n    c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);\n    b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);\n    a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);\n    d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);\n    c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);\n    b = GG(b, c, d, a, x[k + 0], S24, 0xe9b6c7aa);\n    a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);\n    d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n    c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);\n    b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);\n    a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);\n    d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);\n    c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);\n    b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);\n    a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);\n    d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);\n    c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);\n    b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);\n    a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);\n    d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);\n    c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);\n    b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);\n    a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);\n    d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);\n    c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);\n    b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);\n    a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);\n    d = HH(d, a, b, c, x[k + 0], S32, 0xeaa127fa);\n    c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);\n    b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);\n    a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);\n    d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);\n    c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);\n    b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);\n    a = II(a, b, c, d, x[k + 0], S41, 0xf4292244);\n    d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);\n    c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);\n    b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);\n    a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);\n    d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);\n    c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);\n    b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);\n    a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);\n    d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);\n    c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);\n    b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);\n    a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);\n    d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);\n    c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);\n    b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);\n    a = AddUnsigned(a, AA);\n    b = AddUnsigned(b, BB);\n    c = AddUnsigned(c, CC);\n    d = AddUnsigned(d, DD);\n  }\n\n  var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);\n  return temp.toLowerCase();\n};\n\n_c = MD5;\n\nfunction initPinEntry() {\n  // TODO: Remove these after testing complete.\n  // localStorage.removeItem(\"pin\");\n  // localStorage.removeItem(\"locked\");\n  // Elements\n  var dots = document.querySelectorAll(\".dot\");\n  var numbers = document.querySelectorAll(\".number\");\n  var text = document.getElementById(\"pin-text\");\n  var locked = localStorage.getItem('locked') === 'true' ? true : false;\n\n  if (localStorage.getItem('locked') === 'true') {\n    setStylesToLocked();\n    setText();\n  }\n\n  var input = \"\";\n\n  var pinIsSet = function () {\n    return window.localStorage.getItem(\"pin\") !== null;\n  };\n\n  var pinStates = Object.freeze({\n    'enterNewPin': 0,\n    'confirmPin': 1,\n    'enterCurrentPin': 2\n  });\n  var currentPinState; // Uses pinStates to set the current state.\n\n  var validationStates = Object.freeze({\n    'ready': 0,\n    'success': 1,\n    'error': 2\n  });\n  var currentValidationState = validationStates['ready']; // Uses visual states to set the current state.\n\n  var temporaryPin;\n  var numberOfWrongEntries = 0;\n\n  var finalNumberEntered = function () {\n    return input.length >= 4;\n  };\n\n  determineInitialPinState();\n  setText();\n  dots = Array.prototype.slice.call(dots);\n  numbers = Array.prototype.slice.call(numbers);\n  numbers.forEach(function (number) {\n    number.addEventListener(\"click\", function () {\n      if (locked) {\n        setStylesToLocked();\n        setText();\n        return;\n      }\n\n      number.classList.add(\"grow\");\n      input += number.innerText;\n      dots[input.length - 1].classList.add(\"active\");\n\n      if (finalNumberEntered()) {\n        // Validate the entered pin against the stored pin.\n        if (currentPinState === pinStates['enterCurrentPin']) {\n          console.log('Existing pin entry state');\n          checkIfPinValid();\n          setText();\n        } // Else set a temporary pin number.\n\n\n        if (currentPinState === pinStates['enterNewPin']) {\n          console.log('Initial pin entry state');\n          temporaryPin = input;\n          currentPinState = pinStates['confirmPin'];\n          setStylesToSuccess();\n          setText();\n        } else if (currentPinState === pinStates['confirmPin']) {\n          console.log('Confirmation state');\n\n          if (temporaryPin === input) {\n            console.log('Confirmation success');\n            setPinCode(input);\n            currentValidationState = validationStates['success'];\n            setStylesToSuccess();\n          } else {\n            console.log('Confirmation error');\n            temporaryPin = undefined;\n            currentPinState = pinStates['enterNewPin'];\n            currentValidationState = validationStates['error'];\n            setStylesToError();\n          }\n\n          setText();\n        }\n\n        if (!checkIfTooManyWrongEntries()) {\n          returnStylesToStandby();\n        }\n      }\n\n      setTimeout(function () {\n        number.className = \"number\";\n      }, 1000);\n    });\n  });\n\n  function determineInitialPinState() {\n    if (pinIsSet()) {\n      currentPinState = pinStates['enterCurrentPin'];\n    } else {\n      currentPinState = pinStates['enterNewPin'];\n    }\n  }\n\n  function checkIfTooManyWrongEntries() {\n    console.log('Number of wrong entries', numberOfWrongEntries);\n\n    if (numberOfWrongEntries >= 5) {\n      localStorage.setItem('locked', 'true');\n      locked = true;\n      console.log('Locked!', locked);\n      setText();\n      return true;\n    }\n\n    return false;\n  }\n\n  function checkIfPinValid() {\n    if (MD5(input) === localStorage.getItem(\"pin\")) {\n      currentValidationState = validationStates['success'];\n      setStylesToSuccess();\n    } else {\n      currentValidationState = validationStates['error'];\n      setStylesToError();\n      numberOfWrongEntries++;\n    }\n  }\n\n  function setPinCode(code) {\n    localStorage.setItem('pin', MD5(code));\n  }\n\n  function setText() {\n    if (locked) {\n      text.classList.add('error');\n      text.innerText = \"You have been locked out! Download the app again.\";\n      return;\n    }\n\n    if (currentPinState === pinStates['enterNewPin']) {\n      if (currentValidationState === validationStates['ready']) {\n        text.innerText = \"Enter a new pin #\";\n      }\n\n      if (currentValidationState === validationStates['error']) {\n        text.innerText = \"Confirmation error. Please enter a new pin #\";\n      }\n    }\n\n    if (temporaryPin !== undefined && currentPinState === pinStates['confirmPin']) {\n      text.innerText = \"Re-enter your pin #\";\n    }\n\n    if (currentValidationState === validationStates['success']) {\n      text.innerText = \"Pin successfully entered\";\n    }\n  }\n\n  function setStylesToSuccess() {\n    dots.forEach(function (dot) {\n      dot.classList.add(\"correct\");\n    });\n    document.body.classList.add(\"correct\");\n  }\n\n  function setStylesToError() {\n    dots.forEach(function (dot) {\n      dot.classList.add(\"wrong\");\n    });\n    document.body.classList.add(\"wrong\");\n  }\n\n  function setStylesToLocked() {\n    dots.forEach(function (dot) {\n      dot.classList.add('locked');\n    });\n    numbers.forEach(function (number) {\n      number.classList.add('locked');\n    });\n  }\n\n  function returnStylesToStandby() {\n    setTimeout(function () {\n      dots.forEach(function (dot) {\n        dot.className = \"dot\";\n      });\n      input = [];\n    }, 900);\n    setTimeout(function () {\n      document.body.className = \"\";\n    }, 1000);\n  }\n}\n\ninitPinEntry();\n\nvar _c;\n\n$RefreshReg$(_c, \"MD5\");","map":{"version":3,"sources":["/Users/jedi/Desktop/Education/REACT/deployed_treasureblox_dapp/src/PartnershipExample/GamesSelection/SecretCode/SecretCode.js"],"names":["MD5","string","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","F","x","y","z","G","H","I","FF","a","b","c","d","s","ac","GG","HH","II","ConvertToWordArray","lWordCount","lMessageLength","length","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","Array","lBytePosition","lByteCount","charCodeAt","WordToHex","WordToHexValue","WordToHexValue_temp","lByte","lCount","toString","substr","Utf8Encode","replace","utftext","n","String","fromCharCode","k","AA","BB","CC","DD","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","temp","toLowerCase","initPinEntry","dots","document","querySelectorAll","numbers","text","getElementById","locked","localStorage","getItem","setStylesToLocked","setText","input","pinIsSet","window","pinStates","Object","freeze","currentPinState","validationStates","currentValidationState","temporaryPin","numberOfWrongEntries","finalNumberEntered","determineInitialPinState","prototype","slice","call","forEach","number","addEventListener","classList","add","innerText","console","log","checkIfPinValid","setStylesToSuccess","setPinCode","undefined","setStylesToError","checkIfTooManyWrongEntries","returnStylesToStandby","setTimeout","className","setItem","code","dot","body"],"mappings":"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","sourcesContent":["var MD5 = function(string) {\n  function RotateLeft(lValue, iShiftBits) {\n    return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n  }\n\n  function AddUnsigned(lX, lY) {\n    var lX4, lY4, lX8, lY8, lResult;\n    lX8 = lX & 0x80000000;\n    lY8 = lY & 0x80000000;\n    lX4 = lX & 0x40000000;\n    lY4 = lY & 0x40000000;\n    lResult = (lX & 0x3fffffff) + (lY & 0x3fffffff);\n    if (lX4 & lY4) {\n      return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n    }\n    if (lX4 | lY4) {\n      if (lResult & 0x40000000) {\n        return lResult ^ 0xc0000000 ^ lX8 ^ lY8;\n      } else {\n        return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n      }\n    } else {\n      return lResult ^ lX8 ^ lY8;\n    }\n  }\n\n  function F(x, y, z) {\n    return (x & y) | (~x & z);\n  }\n  function G(x, y, z) {\n    return (x & z) | (y & ~z);\n  }\n  function H(x, y, z) {\n    return x ^ y ^ z;\n  }\n  function I(x, y, z) {\n    return y ^ (x | ~z);\n  }\n\n  function FF(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function GG(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function HH(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function II(a, b, c, d, x, s, ac) {\n    a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n    return AddUnsigned(RotateLeft(a, s), b);\n  }\n\n  function ConvertToWordArray(string) {\n    var lWordCount;\n    var lMessageLength = string.length;\n    var lNumberOfWords_temp1 = lMessageLength + 8;\n    var lNumberOfWords_temp2 =\n      (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;\n    var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n    var lWordArray = Array(lNumberOfWords - 1);\n    var lBytePosition = 0;\n    var lByteCount = 0;\n    while (lByteCount < lMessageLength) {\n      lWordCount = (lByteCount - lByteCount % 4) / 4;\n      lBytePosition = (lByteCount % 4) * 8;\n      lWordArray[lWordCount] =\n        lWordArray[lWordCount] |\n        (string.charCodeAt(lByteCount) << lBytePosition);\n      lByteCount++;\n    }\n    lWordCount = (lByteCount - lByteCount % 4) / 4;\n    lBytePosition = (lByteCount % 4) * 8;\n    lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n    lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n    lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n    return lWordArray;\n  }\n\n  function WordToHex(lValue) {\n    var WordToHexValue = \"\",\n      WordToHexValue_temp = \"\",\n      lByte,\n      lCount;\n    for (lCount = 0; lCount <= 3; lCount++) {\n      lByte = (lValue >>> (lCount * 8)) & 255;\n      WordToHexValue_temp = \"0\" + lByte.toString(16);\n      WordToHexValue =\n        WordToHexValue +\n        WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n    }\n    return WordToHexValue;\n  }\n\n  function Utf8Encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if (c > 127 && c < 2048) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      } else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n\n    return utftext;\n  }\n\n  var x = Array();\n  var k, AA, BB, CC, DD, a, b, c, d;\n  var S11 = 7,\n    S12 = 12,\n    S13 = 17,\n    S14 = 22;\n  var S21 = 5,\n    S22 = 9,\n    S23 = 14,\n    S24 = 20;\n  var S31 = 4,\n    S32 = 11,\n    S33 = 16,\n    S34 = 23;\n  var S41 = 6,\n    S42 = 10,\n    S43 = 15,\n    S44 = 21;\n\n  string = Utf8Encode(string);\n\n  x = ConvertToWordArray(string);\n\n  a = 0x67452301;\n  b = 0xefcdab89;\n  c = 0x98badcfe;\n  d = 0x10325476;\n\n  for (k = 0; k < x.length; k += 16) {\n    AA = a;\n    BB = b;\n    CC = c;\n    DD = d;\n    a = FF(a, b, c, d, x[k + 0], S11, 0xd76aa478);\n    d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);\n    c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);\n    b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);\n    a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);\n    d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);\n    c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);\n    b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);\n    a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);\n    d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);\n    c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);\n    b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);\n    a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);\n    d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);\n    c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);\n    b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);\n    a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);\n    d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);\n    c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);\n    b = GG(b, c, d, a, x[k + 0], S24, 0xe9b6c7aa);\n    a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);\n    d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n    c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);\n    b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);\n    a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);\n    d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);\n    c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);\n    b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);\n    a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);\n    d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);\n    c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);\n    b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);\n    a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);\n    d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);\n    c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);\n    b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);\n    a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);\n    d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);\n    c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);\n    b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);\n    a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);\n    d = HH(d, a, b, c, x[k + 0], S32, 0xeaa127fa);\n    c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);\n    b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);\n    a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);\n    d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);\n    c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);\n    b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);\n    a = II(a, b, c, d, x[k + 0], S41, 0xf4292244);\n    d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);\n    c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);\n    b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);\n    a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);\n    d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);\n    c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);\n    b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);\n    a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);\n    d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);\n    c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);\n    b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);\n    a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);\n    d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);\n    c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);\n    b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);\n    a = AddUnsigned(a, AA);\n    b = AddUnsigned(b, BB);\n    c = AddUnsigned(c, CC);\n    d = AddUnsigned(d, DD);\n  }\n\n  var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);\n\n  return temp.toLowerCase();\n};\n\nfunction initPinEntry() {\n\n  // TODO: Remove these after testing complete.\n  // localStorage.removeItem(\"pin\");\n  // localStorage.removeItem(\"locked\");\n\n  // Elements\n  var dots = document.querySelectorAll(\".dot\");\n  var numbers = document.querySelectorAll(\".number\");\n  var text = document.getElementById(\"pin-text\");\n\n  var locked = localStorage.getItem('locked') === 'true' ? true : false;\n  if (localStorage.getItem('locked') === 'true') {\n    setStylesToLocked();\n    setText();\n  }\n\n  var input = \"\";\n  var pinIsSet = function () { return window.localStorage.getItem(\"pin\") !== null; };\n\n  var pinStates = Object.freeze({'enterNewPin': 0, 'confirmPin': 1, 'enterCurrentPin': 2});\n  var currentPinState; // Uses pinStates to set the current state.\n  var validationStates = Object.freeze({'ready': 0, 'success': 1, 'error': 2});\n  var currentValidationState = validationStates['ready']; // Uses visual states to set the current state.\n\n  var temporaryPin;\n  var numberOfWrongEntries = 0;\n  var finalNumberEntered = function () { return input.length >= 4; };\n\n  determineInitialPinState();\n  setText();\n\n  dots = Array.prototype.slice.call(dots);\n  numbers = Array.prototype.slice.call(numbers);\n\n  numbers.forEach(function(number) {\n    number.addEventListener(\"click\", function() {\n\n      if (locked) {\n        setStylesToLocked();\n        setText();\n        return;\n      }\n\n      number.classList.add(\"grow\");\n      input += number.innerText;\n      dots[input.length - 1].classList.add(\"active\");\n\n      if (finalNumberEntered()) {\n\n        // Validate the entered pin against the stored pin.\n        if (currentPinState === pinStates['enterCurrentPin']) {\n          console.log('Existing pin entry state');\n          checkIfPinValid();\n          setText();\n        }\n\n        // Else set a temporary pin number.\n        if (currentPinState === pinStates['enterNewPin']) {\n          console.log('Initial pin entry state');\n          temporaryPin = input;\n          currentPinState = pinStates['confirmPin'];\n          setStylesToSuccess();\n          setText();\n        } else if (currentPinState === pinStates['confirmPin']) {\n          console.log('Confirmation state');\n          if (temporaryPin === input) {\n            console.log('Confirmation success');\n            setPinCode(input);\n            currentValidationState = validationStates['success'];\n            setStylesToSuccess();\n          } else {\n            console.log('Confirmation error');\n            temporaryPin = undefined;\n            currentPinState = pinStates['enterNewPin'];\n            currentValidationState = validationStates['error'];\n            setStylesToError();\n          }\n          setText();\n        }\n\n        if (!checkIfTooManyWrongEntries()) { returnStylesToStandby(); }\n      }\n\n      setTimeout(function() {\n        number.className = \"number\";\n      }, 1000);\n\n    });\n  });\n\n  function determineInitialPinState() {\n    if (pinIsSet()) {\n      currentPinState = pinStates['enterCurrentPin'];\n    } else {\n      currentPinState = pinStates['enterNewPin'];\n    }\n  }\n\n  function checkIfTooManyWrongEntries() {\n    console.log('Number of wrong entries', numberOfWrongEntries);\n    if (numberOfWrongEntries >= 5) {\n      localStorage.setItem('locked', 'true');\n      locked = true;\n      console.log('Locked!', locked);\n      setText();\n      return true;\n    }\n    return false;\n  }\n\n  function checkIfPinValid() {\n    if (MD5(input) === localStorage.getItem(\"pin\")) {\n      currentValidationState = validationStates['success'];\n      setStylesToSuccess();\n    } else {\n      currentValidationState = validationStates['error'];\n      setStylesToError();\n      numberOfWrongEntries++;\n    }\n  }\n\n  function setPinCode(code) {\n    localStorage.setItem('pin', MD5(code));\n  }\n\n  function setText() {\n    if (locked) {\n      text.classList.add('error');\n      text.innerText = \"You have been locked out! Download the app again.\";\n      return;\n    }\n    if (currentPinState === pinStates['enterNewPin']) {\n      if (currentValidationState === validationStates['ready']) {\n        text.innerText = \"Enter a new pin #\";\n      }\n      if (currentValidationState === validationStates['error']) {\n        text.innerText = \"Confirmation error. Please enter a new pin #\";\n      }\n    }\n    if (temporaryPin !== undefined && currentPinState === pinStates['confirmPin']) {\n      text.innerText = \"Re-enter your pin #\";\n    }\n    if (currentValidationState === validationStates['success']) {\n      text.innerText = \"Pin successfully entered\";\n    }\n  }\n\n  function setStylesToSuccess() {\n    dots.forEach(function(dot) {\n      dot.classList.add(\"correct\");\n    });\n    document.body.classList.add(\"correct\");\n  }\n\n  function setStylesToError() {\n    dots.forEach(function(dot) {\n      dot.classList.add(\"wrong\");\n    });\n    document.body.classList.add(\"wrong\");\n  }\n\n  function setStylesToLocked() {\n    dots.forEach(function(dot) {\n      dot.classList.add('locked');\n    });\n    numbers.forEach(function(number) {\n      number.classList.add('locked');\n    });\n  }\n\n  function returnStylesToStandby() {\n    setTimeout(function() {\n      dots.forEach(function(dot) {\n        dot.className = \"dot\";\n      });\n      input = [];\n    }, 900);\n\n    setTimeout(function() {\n      document.body.className = \"\";\n    }, 1000);\n  }\n}\n\ninitPinEntry();\n"]},"metadata":{},"sourceType":"module"}