{"ast":null,"code":"'use strict';\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RPCMethodMap = void 0;\n\nconst utils = require(\"../utils\");\n\nconst devkit_1 = require(\"@meterio/devkit\");\n\nconst simple_http_1 = require(\"./simple-http\");\n\nconst debug = require('debug')('meter:http-provider:rpc');\n\nexports.RPCMethodMap = new Map();\n\nconst HTTPPostProcessor = function (res) {\n  if (res.Code === 0) {\n    return Promise.reject(new Error(`[meter-provider] Invalid response, check the host`));\n  }\n\n  if (res.Code !== 200) {\n    return Promise.reject(new Error(res.Body ? res.Body : '[meter-provider] Invalid response code from provider: ' + res.Code));\n  }\n\n  return Promise.resolve(res.Body);\n};\n\nexports.RPCMethodMap.set('eth_getBlockByNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + utils.fromETHBlockNumber(rpc.params[0]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_blockNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.number);\n  });\n});\nexports.RPCMethodMap.set('eth_getBalance', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.balance);\n  });\n});\nexports.RPCMethodMap.set('eth_getEnergy', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.energy);\n  });\n});\nexports.RPCMethodMap.set('eth_getCode', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/code?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.code);\n  });\n});\nexports.RPCMethodMap.set('eth_getStorageAt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/storage/' + utils.leftPadToBytes32(rpc.params[1]) + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[2]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.value);\n  });\n});\nexports.RPCMethodMap.set('eth_sendRawTransaction', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions';\n    const reqBody = {\n      raw: rpc.params[0]\n    };\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.id);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionReceipt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0] + '/receipt';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    res.blockHash = res.meta.blockID;\n    res.transactionHash = res.meta.txID; // For compatible with ethereum's receipt\n\n    if (res.reverted) {\n      res.status = '0x0';\n    } else {\n      res.status = '0x1';\n    }\n\n    if (res.outputs.length === 1) {\n      res.contractAddress = res.outputs[0].contractAddress;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_call', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let extraURI = '';\n\n    if (rpc.params[0].to) {\n      extraURI = '/' + rpc.params[0].to;\n    }\n\n    extraURI += '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts' + extraURI;\n    const reqBody = {\n      value: rpc.params[0].value || '',\n      data: rpc.params[0].data || '0x',\n      gasPrice: rpc.params[0].gasPrice || ''\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    debug('eth_call returns', res);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    } else {\n      if (res.reverted || res.vmError) {\n        if (res.data && res.data.startsWith('0x08c379a0')) {\n          return rpc.makeError('VM reverted: ' + require('web3-eth-abi').decodeParameter('string', res.data.replace(/^0x08c379a0/i, '')));\n        } else {\n          return rpc.makeError('VM executing failed' + (res.vmError ? ': ' + res.vmError : ''));\n        }\n      } else {\n        return rpc.makeResult(res.data === '0x' ? '' : res.data);\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_estimateGas', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts/*' + extraURI;\n    const reqBody = {\n      clauses: [{\n        to: rpc.params[0].to || null,\n        value: rpc.params[0].value || '',\n        data: rpc.params[0].data || '0x',\n        token: rpc.params[0].token || 0\n      }],\n      gasPrice: rpc.params[0].gasPrice || undefined\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res || res.length === 0) {\n      return rpc.makeResult(null);\n    } else {\n      const result = res[0];\n\n      if (result.reverted || result.vmError) {\n        if (result.data && result.data.startsWith('0x08c379a0')) {\n          return rpc.makeError('Gas estimation failed with VM reverted: ' + require('web3-eth-abi').decodeParameter('string', result.data.replace(/^0x08c379a0/i, '')));\n        } else {\n          return rpc.makeError('Gas estimation failed' + (result.vmError ? ': ' + result.vmError : ''));\n        }\n      } else {\n        debug('VM gas:', result.gasUsed); // ignore the overflow since block gas limit is uint64 and JavaScript's max number is 2^53\n\n        const intrinsicGas = devkit_1.Transaction.intrinsicGas(reqBody.clauses); // increase vm gas by 15000 for safe since it's estimated from current block state, final state for the transaction is not determined for now\n\n        return rpc.makeResult(intrinsicGas + (result.gasUsed ? result.gasUsed + 15000 : 0));\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_getLogs', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let query = '';\n\n    if (rpc.params[0].address) {\n      query = '&address=' + rpc.params[0].address;\n    }\n\n    if (rpc.params[0].order && (rpc.params[0].order.toUpperCase() === 'ASC' || rpc.params[0].order.toUpperCase() === 'DESC')) {\n      query += '&order=' + rpc.params[0].order.toUpperCase();\n    }\n\n    query = query.replace('&', '?');\n    const URL = host + '/logs/events' + query;\n    const reqBody = utils.formatLogQuery(rpc.params[0]);\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    for (const item of res) {\n      item.blockNumber = item.meta.blockNumber;\n      item.blockHash = item.meta.blockID;\n      item.transactionHash = item.meta.txID;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockRef', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult(res.id.substr(0, 18));\n  });\n});\nexports.RPCMethodMap.set('eth_getChainTag', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/0';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id || res.id.length !== 66) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult('0x' + res.id.substr(64, 2));\n  });\n});","map":{"version":3,"sources":["../../src/provider/rpc-methods.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RPCMethodMap = void 0;\nconst utils = require(\"../utils\");\nconst devkit_1 = require(\"@meterio/devkit\");\nconst simple_http_1 = require(\"./simple-http\");\nconst debug = require('debug')('meter:http-provider:rpc');\nexports.RPCMethodMap = new Map();\nconst HTTPPostProcessor = function (res) {\n    if (res.Code === 0) {\n        return Promise.reject(new Error(`[meter-provider] Invalid response, check the host`));\n    }\n    if (res.Code !== 200) {\n        return Promise.reject(new Error(res.Body ? res.Body : ('[meter-provider] Invalid response code from provider: ' + res.Code)));\n    }\n    return Promise.resolve(res.Body);\n};\nexports.RPCMethodMap.set('eth_getBlockByNumber', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/blocks/' + utils.fromETHBlockNumber(rpc.params[0]);\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(res);\n    });\n});\nexports.RPCMethodMap.set('eth_getBlockByHash', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/blocks/' + rpc.params[0];\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(res);\n    });\n});\nexports.RPCMethodMap.set('eth_blockNumber', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/blocks/best';\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.number);\n    });\n});\nexports.RPCMethodMap.set('eth_getBalance', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.balance);\n    });\n});\nexports.RPCMethodMap.set('eth_getEnergy', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.energy);\n    });\n});\nexports.RPCMethodMap.set('eth_getCode', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/accounts/' + rpc.params[0] + '/code?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.code);\n    });\n});\nexports.RPCMethodMap.set('eth_getStorageAt', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/accounts/' + rpc.params[0] + '/storage/' + utils.leftPadToBytes32(rpc.params[1]) + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[2]);\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.value);\n    });\n});\nexports.RPCMethodMap.set('eth_sendRawTransaction', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/transactions';\n        const reqBody = {\n            raw: rpc.params[0],\n        };\n        const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n        return rpc.makeResult(!res ? null : res.id);\n    });\n});\nexports.RPCMethodMap.set('eth_getTransactionByHash', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/transactions/' + rpc.params[0];\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        if (!res) {\n            return rpc.makeResult(null);\n        }\n        res.blockNumber = res.meta.blockNumber;\n        return rpc.makeResult(res);\n    });\n});\nexports.RPCMethodMap.set('eth_getTransactionReceipt', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/transactions/' + rpc.params[0] + '/receipt';\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        if (!res) {\n            return rpc.makeResult(null);\n        }\n        res.blockNumber = res.meta.blockNumber;\n        res.blockHash = res.meta.blockID;\n        res.transactionHash = res.meta.txID;\n        // For compatible with ethereum's receipt\n        if (res.reverted) {\n            res.status = '0x0';\n        }\n        else {\n            res.status = '0x1';\n        }\n        if (res.outputs.length === 1) {\n            res.contractAddress = res.outputs[0].contractAddress;\n        }\n        return rpc.makeResult(res);\n    });\n});\nexports.RPCMethodMap.set('eth_call', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let extraURI = '';\n        if (rpc.params[0].to) {\n            extraURI = '/' + rpc.params[0].to;\n        }\n        extraURI += '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n        const URL = host + '/accounts' + extraURI;\n        const reqBody = {\n            value: rpc.params[0].value || '',\n            data: rpc.params[0].data || '0x',\n            gasPrice: rpc.params[0].gasPrice || '',\n        };\n        if (rpc.params[0].gas) {\n            if (typeof rpc.params[0].gas === 'number') {\n                reqBody.gas = rpc.params[0].gas;\n            }\n            else {\n                reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n            }\n        }\n        if (rpc.params[0].from) {\n            reqBody.caller = rpc.params[0].from;\n        }\n        const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n        debug('eth_call returns', res);\n        if (!res) {\n            return rpc.makeResult(null);\n        }\n        else {\n            if (res.reverted || res.vmError) {\n                if (res.data && res.data.startsWith('0x08c379a0')) {\n                    return rpc.makeError('VM reverted: ' + require('web3-eth-abi').decodeParameter('string', res.data.replace(/^0x08c379a0/i, '')));\n                }\n                else {\n                    return rpc.makeError('VM executing failed' + (res.vmError ? ': ' + res.vmError : ''));\n                }\n            }\n            else {\n                return rpc.makeResult(res.data === '0x' ? '' : res.data);\n            }\n        }\n    });\n});\nexports.RPCMethodMap.set('eth_estimateGas', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n        const URL = host + '/accounts/*' + extraURI;\n        const reqBody = {\n            clauses: [{\n                    to: rpc.params[0].to || null,\n                    value: rpc.params[0].value || '',\n                    data: rpc.params[0].data || '0x',\n                    token: rpc.params[0].token || 0,\n                }],\n            gasPrice: rpc.params[0].gasPrice || undefined,\n        };\n        if (rpc.params[0].gas) {\n            if (typeof rpc.params[0].gas === 'number') {\n                reqBody.gas = rpc.params[0].gas;\n            }\n            else {\n                reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n            }\n        }\n        if (rpc.params[0].from) {\n            reqBody.caller = rpc.params[0].from;\n        }\n        const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n        if (!res || res.length === 0) {\n            return rpc.makeResult(null);\n        }\n        else {\n            const result = res[0];\n            if (result.reverted || result.vmError) {\n                if (result.data && result.data.startsWith('0x08c379a0')) {\n                    return rpc.makeError('Gas estimation failed with VM reverted: ' + require('web3-eth-abi').decodeParameter('string', result.data.replace(/^0x08c379a0/i, '')));\n                }\n                else {\n                    return rpc.makeError('Gas estimation failed' + (result.vmError ? ': ' + result.vmError : ''));\n                }\n            }\n            else {\n                debug('VM gas:', result.gasUsed);\n                // ignore the overflow since block gas limit is uint64 and JavaScript's max number is 2^53\n                const intrinsicGas = devkit_1.Transaction.intrinsicGas(reqBody.clauses);\n                // increase vm gas by 15000 for safe since it's estimated from current block state, final state for the transaction is not determined for now\n                return rpc.makeResult(intrinsicGas + (result.gasUsed ? (result.gasUsed + 15000) : 0));\n            }\n        }\n    });\n});\nexports.RPCMethodMap.set('eth_getLogs', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let query = '';\n        if (rpc.params[0].address) {\n            query = '&address=' + rpc.params[0].address;\n        }\n        if (rpc.params[0].order && (rpc.params[0].order.toUpperCase() === 'ASC' || rpc.params[0].order.toUpperCase() === 'DESC')) {\n            query += '&order=' + rpc.params[0].order.toUpperCase();\n        }\n        query = query.replace('&', '?');\n        const URL = host + '/logs/events' + query;\n        const reqBody = utils.formatLogQuery(rpc.params[0]);\n        const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n        if (!res) {\n            return rpc.makeResult(null);\n        }\n        for (const item of res) {\n            item.blockNumber = item.meta.blockNumber;\n            item.blockHash = item.meta.blockID;\n            item.transactionHash = item.meta.txID;\n        }\n        return rpc.makeResult(res);\n    });\n});\nexports.RPCMethodMap.set('eth_getBlockRef', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/blocks/best';\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        if (!res || !res.id) {\n            return rpc.makeResult(null);\n        }\n        return rpc.makeResult(res.id.substr(0, 18));\n    });\n});\nexports.RPCMethodMap.set('eth_getChainTag', function (rpc, host, timeout) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const URL = host + '/blocks/0';\n        const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n        if (!res || !res.id || res.id.length !== 66) {\n            return rpc.makeResult(null);\n        }\n        return rpc.makeResult('0x' + res.id.substr(64, 2));\n    });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnBjLW1ldGhvZHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcHJvdmlkZXIvcnBjLW1ldGhvZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFBOzs7Ozs7Ozs7Ozs7QUFFWixrQ0FBaUM7QUFDakMsNENBQTZDO0FBRTdDLCtDQUFvRDtBQUNwRCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQTtBQUk1QyxRQUFBLFlBQVksR0FBRyxJQUFJLEdBQUcsRUFBdUIsQ0FBQTtBQUUxRCxNQUFNLGlCQUFpQixHQUFHLFVBQVMsR0FBbUI7SUFDbEQsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNoQixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQyxDQUFBO0tBQ3hGO0lBQ0QsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLEdBQUcsRUFBRTtRQUNsQixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3REFBd0QsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUUsQ0FBQyxDQUFBO0tBQzNJO0lBQ0QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNwQyxDQUFDLENBQUE7QUFFRCxvQkFBWSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxVQUFlLEdBQVksRUFBRSxJQUFZLEVBQUUsT0FBZTs7UUFDL0YsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLFVBQVUsR0FBRyxLQUFLLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBRXZFLE1BQU0s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"]},"metadata":{},"sourceType":"script"}