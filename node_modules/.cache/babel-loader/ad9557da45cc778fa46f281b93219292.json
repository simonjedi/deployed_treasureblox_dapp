{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Array$isArray = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.EthereumEvents = void 0;\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _construct2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/construct\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _web = _interopRequireDefault(require(\"web3\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\n\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\n\nvar _MoralisWalletConnectProvider = _interopRequireDefault(require(\"./MoralisWalletConnectProvider\"));\n\nvar _MoralisCustomProvider = _interopRequireDefault(require(\"./MoralisCustomProvider\"));\n\nvar _MoralisInjectedProvider = _interopRequireDefault(require(\"./MoralisInjectedProvider\"));\n\nvar _TransferUtils = _interopRequireDefault(require(\"./TransferUtils\"));\n\nvar _Cloud = require(\"./Cloud\");\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n\nvar _context28, _context29, _context30, _context31;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof _Symbol !== \"undefined\" && _getIteratorMethod(o) || o[\"@@iterator\"];\n\n  if (!it) {\n    if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context32;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context32 = Object.prototype.toString.call(o)).call(_context32, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar EventEmitter = require('events');\n\nvar EthereumEvents = {\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged'\n};\nexports.EthereumEvents = EthereumEvents;\nvar WARNING = 'Non ethereum enabled browser';\nvar ERROR_WEB3_MISSING = 'Missing web3 instance, make sure to call Moralis.enableWeb3() or Moralis.authenticate()';\n\nfunction uniq(arr) {\n  return (0, _filter.default)(arr).call(arr, function (v, i) {\n    return (0, _indexOf.default)(arr).call(arr, v) === i;\n  });\n}\n\nvar MoralisWeb3 = /*#__PURE__*/function () {\n  function MoralisWeb3() {\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\n    var MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _construct2.default)(MWeb3, args);\n  }\n\n  (0, _createClass2.default)(MoralisWeb3, null, [{\n    key: \"isWeb3Enabled\",\n    value: function () {\n      return this.ensureWeb3IsInstalled();\n    }\n  }, {\n    key: \"setEnableWeb3\",\n    value: function (fn) {\n      this.customEnableWeb3 = fn;\n    }\n  }, {\n    key: \"enableWeb3\",\n    value: function () {\n      var _enableWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options) {\n        var web3, Web3Provider, web3Provider;\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.customEnableWeb3) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.customEnableWeb3(options);\n\n              case 3:\n                web3 = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 6:\n                if (this.speedyNodeApiKey) {\n                  options.speedyNodeApiKey = this.speedyNodeApiKey;\n                  options.provider = 'custom';\n                }\n\n                Web3Provider = MoralisWeb3.getWeb3Provider(options);\n                web3Provider = new Web3Provider();\n                this.activeWeb3Provider = web3Provider;\n                _context.next = 12;\n                return web3Provider.activate(options);\n\n              case 12:\n                web3 = _context.sent;\n\n              case 13:\n                this.web3 = web3;\n                return _context.abrupt(\"return\", web3);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function () {\n        return _enableWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"enable\",\n    value: function () {\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options) {\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // eslint-disable-next-line no-console\n                console.warn('Moralis.enable() is deprecated and will be removed, use Moralis.enableWeb3() instead.');\n                return _context2.abrupt(\"return\", this.enableWeb3(options));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _enable.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"isDotAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'dot':\n        case 'polkadot':\n        case 'kusama':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isElrondAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'erd':\n        case 'elrond':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getWeb3Provider\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.provider) {\n        case 'walletconnect':\n        case 'walletConnect':\n        case 'wc':\n          return _MoralisWalletConnectProvider.default;\n\n        case 'custom':\n          return _MoralisCustomProvider.default;\n\n        default:\n          return _MoralisInjectedProvider.default;\n      }\n    }\n  }, {\n    key: \"cleanup\",\n    value: function () {\n      var _cleanup = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.activeWeb3Provider) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                _context3.next = 3;\n                return this.activeWeb3Provider.deactivate();\n\n              case 3:\n                // Prevent a bug when there is stale data active\n                _MoralisWalletConnectProvider.default.cleanupStaleData();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function () {\n        return _cleanup.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(options) {\n        var _context4, _user$get;\n\n        var isLoggedIn, web3, message, data, accounts, accountsLower, _accountsLower, ethAddress, signature, authData, user;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return _ParseUser.default.currentAsync();\n\n              case 2:\n                isLoggedIn = _context5.sent;\n\n                if (!isLoggedIn) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                _context5.next = 6;\n                return _ParseUser.default.logOut();\n\n              case 6:\n                _context5.next = 8;\n                return MoralisWeb3.cleanup();\n\n              case 8:\n                if (!MoralisWeb3.isDotAuth(options)) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _MoralisDot.default.authenticate(options));\n\n              case 10:\n                if (!MoralisWeb3.isElrondAuth(options)) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _MoralisErd.default.authenticate(options));\n\n              case 12:\n                _context5.next = 14;\n                return this.enableWeb3(options);\n\n              case 14:\n                web3 = _context5.sent;\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context5.next = 18;\n                return (0, _createSigningData.default)(message);\n\n              case 18:\n                data = _context5.sent;\n                _context5.next = 21;\n                return web3.eth.getAccounts();\n\n              case 21:\n                accounts = _context5.sent;\n                accountsLower = (0, _map.default)(accounts).call(accounts, function (v) {\n                  return v.toLowerCase();\n                });\n                _accountsLower = (0, _slicedToArray2.default)(accountsLower, 1), ethAddress = _accountsLower[0];\n\n                if (ethAddress) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                throw new Error('Address not found');\n\n              case 26:\n                _context5.next = 28;\n                return web3.eth.personal.sign(data, ethAddress, '');\n\n              case 28:\n                signature = _context5.sent;\n\n                if (signature) {\n                  _context5.next = 31;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 31:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context5.next = 34;\n                return _ParseUser.default.logInWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 34:\n                user = _context5.sent;\n                _context5.next = 37;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 37:\n                if (user) {\n                  _context5.next = 39;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 39:\n                user.set('accounts', uniq((0, _concat.default)(_context4 = []).call(_context4, accountsLower, (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [])));\n                user.set('ethAddress', ethAddress);\n                _context5.next = 43;\n                return user.save(null, options);\n\n              case 43:\n                return _context5.abrupt(\"return\", user);\n\n              case 44:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account, options) {\n        var _context6, _user$get2;\n\n        var web3, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\n        return _regenerator.default.wrap(function (_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return MoralisWeb3.enableWeb3(options);\n\n              case 2:\n                web3 = _context7.sent;\n                data = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context7.next = 6;\n                return _ParseUser.default.currentAsync();\n\n              case 6:\n                user = _context7.sent;\n                ethAddress = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context7.next = 12;\n                return query.get(ethAddress).catch(function () {\n                  return null;\n                });\n\n              case 12:\n                ethAddressRecord = _context7.sent;\n\n                if (ethAddressRecord) {\n                  _context7.next = 20;\n                  break;\n                }\n\n                _context7.next = 16;\n                return web3.eth.personal.sign(data, account, '');\n\n              case 16:\n                signature = _context7.sent;\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context7.next = 20;\n                return user.linkWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 20:\n                user.set('accounts', uniq((0, _concat.default)(_context6 = [ethAddress]).call(_context6, (_user$get2 = user.get('accounts')) !== null && _user$get2 !== void 0 ? _user$get2 : [])));\n                user.set('ethAddress', ethAddress);\n                _context7.next = 24;\n                return user.save(null, options);\n\n              case 24:\n                return _context7.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(account) {\n        var _user$get3;\n\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context8.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                ethAddressRecord = _context8.sent;\n                _context8.next = 8;\n                return ethAddressRecord.destroy();\n\n              case 8:\n                _context8.next = 10;\n                return _ParseUser.default.currentAsync();\n\n              case 10:\n                user = _context8.sent;\n                accounts = (_user$get3 = user.get('accounts')) !== null && _user$get3 !== void 0 ? _user$get3 : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('accounts', nextAccounts);\n                user.set('ethAddress', nextAccounts[0]);\n                _context8.next = 17;\n                return user._unlinkFrom('moralisEth');\n\n              case 17:\n                _context8.next = 19;\n                return user.save();\n\n              case 19:\n                return _context8.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"initPlugins\",\n    value: function () {\n      var _initPlugins = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(installedPlugins) {\n        var _this = this;\n\n        var specs, allPlugins;\n        return _regenerator.default.wrap(function (_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.t0 = installedPlugins;\n\n                if (_context12.t0) {\n                  _context12.next = 5;\n                  break;\n                }\n\n                _context12.next = 4;\n                return (0, _Cloud.run)('getPluginSpecs');\n\n              case 4:\n                _context12.t0 = _context12.sent;\n\n              case 5:\n                specs = _context12.t0;\n                if (!this.Plugins) this.Plugins = {};\n\n                if (specs) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 9:\n                allPlugins = this.Plugins;\n                (0, _forEach.default)(specs).call(specs, function (plugin) {\n                  var _context9;\n\n                  allPlugins[plugin.name] = {};\n                  (0, _forEach.default)(_context9 = plugin.functions).call(_context9, function (f) {\n                    allPlugins[plugin.name][f] = /*#__PURE__*/function () {\n                      var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(params, options) {\n                        var _context10;\n\n                        var response, error, triggerReturn;\n                        return _regenerator.default.wrap(function (_context11) {\n                          while (1) {\n                            switch (_context11.prev = _context11.next) {\n                              case 0:\n                                if (!options) options = {};\n                                _context11.next = 3;\n                                return (0, _Cloud.run)((0, _concat.default)(_context10 = \"\".concat(plugin.name, \"_\")).call(_context10, f), params);\n\n                              case 3:\n                                response = _context11.sent;\n\n                                if (response.data.success) {\n                                  _context11.next = 7;\n                                  break;\n                                }\n\n                                error = (0, _stringify.default)(response.data.data, null, 2);\n                                throw new Error(\"Something went wrong\\n\".concat(error));\n\n                              case 7:\n                                if (!(options.disableTriggers !== true)) {\n                                  _context11.next = 13;\n                                  break;\n                                }\n\n                                _context11.next = 10;\n                                return _this.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                              case 10:\n                                triggerReturn = _context11.sent;\n\n                                if (!triggerReturn) {\n                                  _context11.next = 13;\n                                  break;\n                                }\n\n                                return _context11.abrupt(\"return\", triggerReturn);\n\n                              case 13:\n                                return _context11.abrupt(\"return\", response.data.result);\n\n                              case 14:\n                              case \"end\":\n                                return _context11.stop();\n                            }\n                          }\n                        }, _callee7);\n                      }));\n\n                      return function () {\n                        return _ref.apply(this, arguments);\n                      };\n                    }();\n                  });\n                });\n                this.Plugins = allPlugins;\n\n              case 12:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      return function () {\n        return _initPlugins.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleTriggers\",\n    value: function () {\n      var _handleTriggers = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11(triggersArray, payload) {\n        var _this2 = this;\n\n        var response, _loop, i, _ret;\n\n        return _regenerator.default.wrap(function (_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                if (triggersArray) {\n                  _context18.next = 2;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\");\n\n              case 2:\n                _loop = /*#__PURE__*/_regenerator.default.mark(function _loop(i) {\n                  var _triggersArray$i, _triggersArray$i2, _triggersArray$i2$opt, _triggersArray$i3, _triggersArray$i3$opt, _triggersArray$i4, _triggersArray$i5, _triggersArray$i5$opt, _triggersArray$i6, _triggersArray$i7, _triggersArray$i8, _triggersArray$i9, _triggersArray$i10, _triggersArray$i11, _triggersArray$i12, _triggersArray$i13, _triggersArray$i14, _triggersArray$i15, _triggersArray$i16, _triggersArray$i17, _triggersArray$i18, _triggersArray$i19, _triggersArray$i20, _triggersArray$i21, _triggersArray$i22, _triggersArray$i23, _triggersArray$i24, _triggersArray$i25, _triggersArray$i27, _triggersArray$i29, _triggersArray$i30, _triggersArray$i31;\n\n                  var _context13, _context14;\n\n                  return _regenerator.default.wrap(function (_context17) {\n                    while (1) {\n                      switch (_context17.prev = _context17.next) {\n                        case 0:\n                          _context17.t0 = (_triggersArray$i = triggersArray[i]) === null || _triggersArray$i === void 0 ? void 0 : _triggersArray$i.name;\n                          _context17.next = _context17.t0 === 'openUrl' ? 3 : _context17.t0 === 'web3Transaction' ? 6 : _context17.t0 === 'web3Sign' ? 19 : _context17.t0 === 'callPluginEndpoint' ? 36 : _context17.t0 === 'web3SignV4' ? 58 : 73;\n                          break;\n\n                        case 3:\n                          // Open url in a new tab\n                          if (((_triggersArray$i2 = triggersArray[i]) === null || _triggersArray$i2 === void 0 ? void 0 : (_triggersArray$i2$opt = _triggersArray$i2.options) === null || _triggersArray$i2$opt === void 0 ? void 0 : _triggersArray$i2$opt.newTab) === true || !((_triggersArray$i3 = triggersArray[i]) !== null && _triggersArray$i3 !== void 0 && (_triggersArray$i3$opt = _triggersArray$i3.options) !== null && _triggersArray$i3$opt !== void 0 && _triggersArray$i3$opt.hasOwnProperty('newTab'))) window.open((_triggersArray$i4 = triggersArray[i]) === null || _triggersArray$i4 === void 0 ? void 0 : _triggersArray$i4.data); // Open url in the same tab\n\n                          if (((_triggersArray$i5 = triggersArray[i]) === null || _triggersArray$i5 === void 0 ? void 0 : (_triggersArray$i5$opt = _triggersArray$i5.options) === null || _triggersArray$i5$opt === void 0 ? void 0 : _triggersArray$i5$opt.newTab) === false) window.open((_triggersArray$i6 = triggersArray[i]) === null || _triggersArray$i6 === void 0 ? void 0 : _triggersArray$i6.data, '_self');\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 6:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 8;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 8:\n                          if (!(((_triggersArray$i7 = triggersArray[i]) === null || _triggersArray$i7 === void 0 ? void 0 : _triggersArray$i7.shouldAwait) === true)) {\n                            _context17.next = 12;\n                            break;\n                          }\n\n                          _context17.next = 11;\n                          return _this2.web3.eth.sendTransaction((_triggersArray$i8 = triggersArray[i]) === null || _triggersArray$i8 === void 0 ? void 0 : _triggersArray$i8.data);\n\n                        case 11:\n                          response = _context17.sent;\n\n                        case 12:\n                          // Trigger a web3 transaction (does NOT await)\n                          if (((_triggersArray$i9 = triggersArray[i]) === null || _triggersArray$i9 === void 0 ? void 0 : _triggersArray$i9.shouldAwait) === false) response = _this2.web3.eth.sendTransaction((_triggersArray$i10 = triggersArray[i]) === null || _triggersArray$i10 === void 0 ? void 0 : _triggersArray$i10.data); // Save the response returned by the web3 trasanction\n\n                          if (((_triggersArray$i11 = triggersArray[i]) === null || _triggersArray$i11 === void 0 ? void 0 : _triggersArray$i11.saveResponse) === true) _this2.memoryCard.save(response); // Return payload and response\n\n                          if (!(((_triggersArray$i12 = triggersArray[i]) === null || _triggersArray$i12 === void 0 ? void 0 : _triggersArray$i12.shouldReturnPayload) === true)) {\n                            _context17.next = 16;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 16:\n                          if (!(((_triggersArray$i13 = triggersArray[i]) === null || _triggersArray$i13 === void 0 ? void 0 : _triggersArray$i13.shouldReturnResponse) === true)) {\n                            _context17.next = 18;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 18:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 19:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 21;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 21:\n                          if (triggersArray[i].message) {\n                            _context17.next = 23;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger does not have a message to sign');\n\n                        case 23:\n                          if (!(!triggersArray[i].signer || !_this2.web3.utils.isAddress(triggersArray[i].signer))) {\n                            _context17.next = 25;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger signer address missing or invalid');\n\n                        case 25:\n                          if (!(((_triggersArray$i14 = triggersArray[i]) === null || _triggersArray$i14 === void 0 ? void 0 : _triggersArray$i14.shouldAwait) === true)) {\n                            _context17.next = 29;\n                            break;\n                          }\n\n                          _context17.next = 28;\n                          return _this2.web3.eth.personal.sign(triggersArray[i].message, triggersArray[i].signer);\n\n                        case 28:\n                          response = _context17.sent;\n\n                        case 29:\n                          // Sign a message using web3 (does NOT await)\n                          if (((_triggersArray$i15 = triggersArray[i]) === null || _triggersArray$i15 === void 0 ? void 0 : _triggersArray$i15.shouldAwait) === false) response = _this2.web3.eth.personal.sign(triggersArray[i].message, triggersArray[i].signer); // Save response\n\n                          if (((_triggersArray$i16 = triggersArray[i]) === null || _triggersArray$i16 === void 0 ? void 0 : _triggersArray$i16.saveResponse) === true) _this2.memoryCard.save(response); // Return payload and response\n\n                          if (!(((_triggersArray$i17 = triggersArray[i]) === null || _triggersArray$i17 === void 0 ? void 0 : _triggersArray$i17.shouldReturnPayload) === true)) {\n                            _context17.next = 33;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 33:\n                          if (!(((_triggersArray$i18 = triggersArray[i]) === null || _triggersArray$i18 === void 0 ? void 0 : _triggersArray$i18.shouldReturnResponse) === true)) {\n                            _context17.next = 35;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 35:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 36:\n                          if (triggersArray[i].pluginName) {\n                            _context17.next = 38;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an plugin name to call');\n\n                        case 38:\n                          if (triggersArray[i].endpoint) {\n                            _context17.next = 40;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an endpoint to call');\n\n                        case 40:\n                          if (!(((_triggersArray$i19 = triggersArray[i]) === null || _triggersArray$i19 === void 0 ? void 0 : _triggersArray$i19.shouldAwait) === true)) {\n                            _context17.next = 45;\n                            break;\n                          } // Check if a saved response has to be used to fill a parameter needed by the plugin\n\n\n                          if (triggersArray[i].useSavedResponse === true) {\n                            triggersArray[i].params[triggersArray[i].savedResponseAs] = _this2.memoryCard.get(triggersArray[i].savedResponseAt);\n                          } // Call the endpoint\n\n\n                          _context17.next = 44;\n                          return (0, _Cloud.run)((0, _concat.default)(_context13 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context13, triggersArray[i].endpoint), triggersArray[i].params);\n\n                        case 44:\n                          response = _context17.sent;\n\n                        case 45:\n                          // Call a plugin endpoint (does NOT await)\n                          if (((_triggersArray$i20 = triggersArray[i]) === null || _triggersArray$i20 === void 0 ? void 0 : _triggersArray$i20.shouldAwait) === false) {\n                            // Check if a saved response has to be used to fill a parameter needed by the plugin\n                            if (triggersArray[i].useSavedResponse === true) {\n                              triggersArray[i].params[triggersArray[i].savedResponseAs] = _this2.memoryCard.get(triggersArray[i].savedResponseAt);\n                            } // Call the endpoint\n\n\n                            response = (0, _Cloud.run)((0, _concat.default)(_context14 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context14, triggersArray[i].endpoint), triggersArray[i].params);\n                          } // If the response contains a trigger, run it\n\n\n                          if (!(triggersArray[i].runResponseTrigger === true)) {\n                            _context17.next = 50;\n                            break;\n                          }\n\n                          _context17.next = 49;\n                          return _this2.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                        case 49:\n                          response = _context17.sent;\n\n                        case 50:\n                          // Save response\n                          if (((_triggersArray$i21 = triggersArray[i]) === null || _triggersArray$i21 === void 0 ? void 0 : _triggersArray$i21.saveResponse) === true) _this2.memoryCard.save(response); // If should not run the response trigger, continues the loop and does not return (to avoid breaking the loop execution and run other pending triggers)\n\n                          if (!(((_triggersArray$i22 = triggersArray[i]) === null || _triggersArray$i22 === void 0 ? void 0 : _triggersArray$i22.runResponseTrigger) === false)) {\n                            _context17.next = 53;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", \"continue\");\n\n                        case 53:\n                          if (!(((_triggersArray$i23 = triggersArray[i]) === null || _triggersArray$i23 === void 0 ? void 0 : _triggersArray$i23.shouldReturnPayload) === true)) {\n                            _context17.next = 55;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: 'payload',\n                              response: response\n                            }\n                          });\n\n                        case 55:\n                          if (!(((_triggersArray$i24 = triggersArray[i]) === null || _triggersArray$i24 === void 0 ? void 0 : _triggersArray$i24.shouldReturnResponse) === true)) {\n                            _context17.next = 57;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 57:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 58:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 60;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 60:\n                          if (triggersArray[i].parameters) {\n                            _context17.next = 62;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have `parameters` to sign');\n\n                        case 62:\n                          if (triggersArray[i].from) {\n                            _context17.next = 64;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have a `from` address');\n\n                        case 64:\n                          if (!(((_triggersArray$i25 = triggersArray[i]) === null || _triggersArray$i25 === void 0 ? void 0 : _triggersArray$i25.shouldAwait) === true)) {\n                            _context17.next = 67;\n                            break;\n                          }\n\n                          _context17.next = 67;\n                          return _this2.web3.currentProvider.send({\n                            method: 'eth_signTypedData_v4',\n                            params: triggersArray[i].parameters,\n                            from: triggersArray[i].from\n                          },\n                          /*#__PURE__*/\n                          // eslint-disable-next-line no-loop-func\n                          function () {\n                            var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(error, result) {\n                              var _triggersArray$i26;\n\n                              return _regenerator.default.wrap(function (_context15) {\n                                while (1) {\n                                  switch (_context15.prev = _context15.next) {\n                                    case 0:\n                                      if (!error) {\n                                        _context15.next = 2;\n                                        break;\n                                      }\n\n                                      throw new Error(error.message || error);\n\n                                    case 2:\n                                      // Save response\n                                      if (((_triggersArray$i26 = triggersArray[i]) === null || _triggersArray$i26 === void 0 ? void 0 : _triggersArray$i26.saveResponse) === true) _this2.memoryCard.save(result);\n                                      response = result;\n\n                                    case 4:\n                                    case \"end\":\n                                      return _context15.stop();\n                                  }\n                                }\n                              }, _callee9);\n                            }));\n\n                            return function () {\n                              return _ref2.apply(this, arguments);\n                            };\n                          }());\n\n                        case 67:\n                          if (((_triggersArray$i27 = triggersArray[i]) === null || _triggersArray$i27 === void 0 ? void 0 : _triggersArray$i27.shouldAwait) === false) {\n                            _this2.web3.currentProvider.send({\n                              method: 'eth_signTypedData_v4',\n                              params: triggersArray[i].parameters,\n                              from: triggersArray[i].from\n                            },\n                            /*#__PURE__*/\n                            // eslint-disable-next-line no-loop-func\n                            function () {\n                              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10(error, result) {\n                                var _triggersArray$i28;\n\n                                return _regenerator.default.wrap(function (_context16) {\n                                  while (1) {\n                                    switch (_context16.prev = _context16.next) {\n                                      case 0:\n                                        if (!error) {\n                                          _context16.next = 2;\n                                          break;\n                                        }\n\n                                        throw new Error(error.message || error);\n\n                                      case 2:\n                                        // Save response\n                                        if (((_triggersArray$i28 = triggersArray[i]) === null || _triggersArray$i28 === void 0 ? void 0 : _triggersArray$i28.saveResponse) === true) _this2.memoryCard.save(result);\n                                        response = result;\n\n                                      case 4:\n                                      case \"end\":\n                                        return _context16.stop();\n                                    }\n                                  }\n                                }, _callee10);\n                              }));\n\n                              return function () {\n                                return _ref3.apply(this, arguments);\n                              };\n                            }());\n                          } // Return payload and response\n\n\n                          if (!(((_triggersArray$i29 = triggersArray[i]) === null || _triggersArray$i29 === void 0 ? void 0 : _triggersArray$i29.shouldReturnPayload) === true)) {\n                            _context17.next = 70;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 70:\n                          if (!(((_triggersArray$i30 = triggersArray[i]) === null || _triggersArray$i30 === void 0 ? void 0 : _triggersArray$i30.shouldReturnResponse) === true)) {\n                            _context17.next = 72;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 72:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 73:\n                          throw new Error(\"Unknown trigger: \\\"\".concat((_triggersArray$i31 = triggersArray[i]) === null || _triggersArray$i31 === void 0 ? void 0 : _triggersArray$i31.name, \"\\\"\"));\n\n                        case 74:\n                        case \"end\":\n                          return _context17.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                i = 0;\n\n              case 4:\n                if (!(i < triggersArray.length)) {\n                  _context18.next = 14;\n                  break;\n                }\n\n                return _context18.delegateYield(_loop(i), \"t0\", 6);\n\n              case 6:\n                _ret = _context18.t0;\n\n                if (!(_ret === \"continue\")) {\n                  _context18.next = 9;\n                  break;\n                }\n\n                return _context18.abrupt(\"continue\", 11);\n\n              case 9:\n                if (!((0, _typeof2.default)(_ret) === \"object\")) {\n                  _context18.next = 11;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\", _ret.v);\n\n              case 11:\n                i++;\n                _context18.next = 4;\n                break;\n\n              case 14:\n                // Delete all saved data\n                this.memoryCard.deleteSaved();\n\n              case 15:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      return function () {\n        return _handleTriggers.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllERC20\",\n    value: function () {\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        var _ref4,\n            chain,\n            address,\n            result,\n            _args13 = arguments;\n\n        return _regenerator.default.wrap(function (_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _ref4 = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : {}, chain = _ref4.chain, address = _ref4.address;\n                _context19.next = 3;\n                return (0, _Cloud.run)('getAllERC20', {\n                  chain: chain,\n                  address: address\n                });\n\n              case 3:\n                result = _context19.sent;\n                return _context19.abrupt(\"return\", result);\n\n              case 5:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee12);\n      }));\n\n      return function () {\n        return _getAllERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getERC20\",\n    value: function () {\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13() {\n        var _ref5,\n            chain,\n            address,\n            symbol,\n            tokenAddress,\n            result,\n            _args14 = arguments;\n\n        return _regenerator.default.wrap(function (_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _ref5 = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {}, chain = _ref5.chain, address = _ref5.address, symbol = _ref5.symbol, tokenAddress = _ref5.tokenAddress;\n                result = (0, _Cloud.run)('getERC20', {\n                  chain: chain,\n                  address: address,\n                  symbol: symbol,\n                  tokenAddress: tokenAddress\n                });\n                return _context20.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee13);\n      }));\n\n      return function () {\n        return _getERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getNFTs\",\n    value: function () {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$chain = _ref6.chain,\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\n          _ref6$address = _ref6.address,\n          address = _ref6$address === void 0 ? '' : _ref6$address;\n\n      return (0, _Cloud.run)('getNFTs_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getNFTsCount\",\n    value: function () {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$chain = _ref7.chain,\n          chain = _ref7$chain === void 0 ? 'Eth' : _ref7$chain,\n          _ref7$address = _ref7.address,\n          address = _ref7$address === void 0 ? '' : _ref7$address;\n\n      return (0, _Cloud.run)('getNFTsCount_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getTransactions\",\n    value: function () {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref8$chain = _ref8.chain,\n          chain = _ref8$chain === void 0 ? 'Eth' : _ref8$chain,\n          _ref8$address = _ref8.address,\n          address = _ref8$address === void 0 ? '' : _ref8$address,\n          _ref8$order = _ref8.order,\n          order = _ref8$order === void 0 ? 'desc' : _ref8$order;\n\n      return (0, _Cloud.run)('getTransactions', {\n        chain: chain,\n        address: address,\n        order: order\n      });\n    }\n  }, {\n    key: \"getTransactionsCount\",\n    value: function () {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$chain = _ref9.chain,\n          chain = _ref9$chain === void 0 ? 'Eth' : _ref9$chain,\n          _ref9$address = _ref9.address,\n          address = _ref9$address === void 0 ? '' : _ref9$address;\n\n      return (0, _Cloud.run)('getTransactionsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"transfer\",\n    value: function () {\n      var _transfer = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14() {\n        var _ref10,\n            _ref10$type,\n            type,\n            _ref10$receiver,\n            receiver,\n            _ref10$contractAddres,\n            contractAddress,\n            contract_address,\n            _ref10$amount,\n            amount,\n            _ref10$tokenId,\n            tokenId,\n            token_id,\n            _ref10$system,\n            system,\n            _ref10$awaitReceipt,\n            awaitReceipt,\n            options,\n            web3,\n            sender,\n            transferOperation,\n            customToken,\n            transferEvents,\n            _args15 = arguments;\n\n        return _regenerator.default.wrap(function (_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _ref10 = _args15.length > 0 && _args15[0] !== undefined ? _args15[0] : {}, _ref10$type = _ref10.type, type = _ref10$type === void 0 ? 'native' : _ref10$type, _ref10$receiver = _ref10.receiver, receiver = _ref10$receiver === void 0 ? '' : _ref10$receiver, _ref10$contractAddres = _ref10.contractAddress, contractAddress = _ref10$contractAddres === void 0 ? '' : _ref10$contractAddres, contract_address = _ref10.contract_address, _ref10$amount = _ref10.amount, amount = _ref10$amount === void 0 ? '' : _ref10$amount, _ref10$tokenId = _ref10.tokenId, tokenId = _ref10$tokenId === void 0 ? '' : _ref10$tokenId, token_id = _ref10.token_id, _ref10$system = _ref10.system, system = _ref10$system === void 0 ? 'evm' : _ref10$system, _ref10$awaitReceipt = _ref10.awaitReceipt, awaitReceipt = _ref10$awaitReceipt === void 0 ? true : _ref10$awaitReceipt; // Allow snake-case for backwards compatibility\n                // eslint-disable-next-line camelcase\n\n                contractAddress = contractAddress || contract_address; // eslint-disable-next-line camelcase\n\n                tokenId = tokenId || token_id;\n                options = {\n                  receiver: receiver,\n                  contractAddress: contractAddress,\n                  amount: amount,\n                  tokenId: tokenId,\n                  system: system,\n                  awaitReceipt: awaitReceipt\n                };\n\n                _TransferUtils.default.isSupportedType(type);\n\n                _TransferUtils.default.validateInput(type, options);\n\n                if (this.ensureWeb3IsInstalled()) {\n                  _context21.next = 8;\n                  break;\n                }\n\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 8:\n                web3 = this.web3;\n                _context21.next = 11;\n                return web3.eth.getAccounts();\n\n              case 11:\n                _context21.next = 13;\n                return _context21.sent[0];\n\n              case 13:\n                sender = _context21.sent;\n\n                if (sender) {\n                  _context21.next = 16;\n                  break;\n                }\n\n                throw new Error('Sender address not found');\n\n              case 16:\n                if (tokenId) _TransferUtils.default.isUint256(tokenId);\n                if (type !== 'native') customToken = new web3.eth.Contract(_TransferUtils.default.abi[type], contractAddress);\n                _context21.t0 = type;\n                _context21.next = _context21.t0 === 'native' ? 21 : _context21.t0 === 'erc20' ? 23 : _context21.t0 === 'erc721' ? 25 : _context21.t0 === 'erc1155' ? 27 : 29;\n                break;\n\n              case 21:\n                transferOperation = web3.eth.sendTransaction({\n                  from: sender,\n                  to: receiver,\n                  value: amount\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 23:\n                transferOperation = customToken.methods.transfer(receiver, amount).send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 25:\n                transferOperation = customToken.methods.safeTransferFrom(sender, receiver, \"\".concat(tokenId)).send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 27:\n                transferOperation = customToken.methods.safeTransferFrom(sender, receiver, \"\".concat(tokenId), amount, '0x').send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 29:\n                throw new Error(\"Unknown transfer type: \\\"\".concat(type, \"\\\"\"));\n\n              case 30:\n                if (!awaitReceipt) {\n                  _context21.next = 32;\n                  break;\n                }\n\n                return _context21.abrupt(\"return\", transferOperation);\n\n              case 32:\n                transferEvents = new EventEmitter();\n                transferOperation.on('transactionHash', function (hash) {\n                  transferEvents.emit('transactionHash', hash);\n                }).on('receipt', function (receipt) {\n                  transferEvents.emit('receipt', receipt);\n                }).on('confirmation', function (confirmationNumber, receipt) {\n                  transferEvents.emit('confirmation', (confirmationNumber, receipt));\n                }).on('error', function (error) {\n                  transferEvents.emit('error', error);\n                  throw error;\n                });\n                return _context21.abrupt(\"return\", transferEvents);\n\n              case 35:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      return function () {\n        return _transfer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"executeFunction\",\n    value: function () {\n      var _executeFunction = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee15() {\n        var _context22;\n\n        var _ref11,\n            contractAddress,\n            abi,\n            functionName,\n            msgValue,\n            _ref11$awaitReceipt,\n            awaitReceipt,\n            _ref11$params,\n            params,\n            web3,\n            contractOptions,\n            functionData,\n            stateMutability,\n            isReadFunction,\n            currentAddress,\n            errors,\n            _iterator,\n            _step,\n            input,\n            value,\n            parsedInputs,\n            contract,\n            customFunction,\n            response,\n            contractExecuteEvents,\n            _args16 = arguments;\n\n        return _regenerator.default.wrap(function (_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _ref11 = _args16.length > 0 && _args16[0] !== undefined ? _args16[0] : {}, contractAddress = _ref11.contractAddress, abi = _ref11.abi, functionName = _ref11.functionName, msgValue = _ref11.msgValue, _ref11$awaitReceipt = _ref11.awaitReceipt, awaitReceipt = _ref11$awaitReceipt === void 0 ? true : _ref11$awaitReceipt, _ref11$params = _ref11.params, params = _ref11$params === void 0 ? {} : _ref11$params;\n\n                if (this.ensureWeb3IsInstalled()) {\n                  _context23.next = 3;\n                  break;\n                }\n\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 3:\n                web3 = this.web3;\n                contractOptions = {};\n                functionData = (0, _find.default)(abi).call(abi, function (x) {\n                  return x.name === functionName;\n                });\n\n                if (functionData) {\n                  _context23.next = 8;\n                  break;\n                }\n\n                throw new Error('Function does not exist in abi');\n\n              case 8:\n                stateMutability = functionData === null || functionData === void 0 ? void 0 : functionData.stateMutability;\n                isReadFunction = stateMutability === 'view' || stateMutability === 'pure';\n\n                if (isReadFunction) {\n                  _context23.next = 20;\n                  break;\n                }\n\n                if (params.from) {\n                  _context23.next = 20;\n                  break;\n                }\n\n                _context23.next = 14;\n                return web3.eth.getAccounts();\n\n              case 14:\n                _context23.next = 16;\n                return _context23.sent[0];\n\n              case 16:\n                currentAddress = _context23.sent;\n\n                if (currentAddress) {\n                  _context23.next = 19;\n                  break;\n                }\n\n                throw new Error('From address is required');\n\n              case 19:\n                contractOptions.from = currentAddress;\n\n              case 20:\n                errors = [];\n                _iterator = _createForOfIteratorHelper(functionData.inputs);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    input = _step.value;\n                    value = params[input.name];\n\n                    if (!(typeof value !== 'undefined' && value)) {\n                      errors.push(\"\".concat(input.name, \" is required\"));\n                    }\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                if (!(errors.length > 0)) {\n                  _context23.next = 25;\n                  break;\n                }\n\n                throw errors;\n\n              case 25:\n                parsedInputs = (0, _map.default)(_context22 = functionData.inputs).call(_context22, function (x) {\n                  return params[x.name];\n                });\n                contract = new web3.eth.Contract(abi, contractAddress, contractOptions);\n                customFunction = contract.methods[functionName];\n                response = isReadFunction ? customFunction.apply(void 0, (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).call() : customFunction.apply(void 0, (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).send(msgValue ? {\n                  value: msgValue\n                } : null);\n\n                if (!awaitReceipt) {\n                  _context23.next = 31;\n                  break;\n                }\n\n                return _context23.abrupt(\"return\", response);\n\n              case 31:\n                contractExecuteEvents = new EventEmitter();\n                response.on('transactionHash', function (hash) {\n                  contractExecuteEvents.emit('transactionHash', hash);\n                }).on('receipt', function (receipt) {\n                  contractExecuteEvents.emit('receipt', receipt);\n                }).on('confirmation', function (confirmationNumber, receipt) {\n                  contractExecuteEvents.emit('confirmation', (confirmationNumber, receipt));\n                }).on('error', function (error) {\n                  contractExecuteEvents.emit('error', error);\n                  throw error;\n                });\n                return _context23.abrupt(\"return\", contractExecuteEvents);\n\n              case 34:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      return function () {\n        return _executeFunction.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return \"Moralis Authentication\"; // const data = `Moralis Authentication`;\n      // return data;\n    }\n  }, {\n    key: \"on\",\n    value: function (eventName, cb) {\n      var _window = window,\n          ethereum = _window.ethereum;\n\n      if (!ethereum || !ethereum.on) {\n        // eslint-disable-next-line no-console\n        console.warn(WARNING);\n        return function () {\n          // eslint-disable-next-line no-console\n          console.warn(WARNING);\n        };\n      }\n\n      ethereum.on(eventName, cb);\n      return function () {\n        // eslint-disable-next-line no-console\n        console.warn('UNSUB NOT SUPPORTED');\n      };\n    }\n  }, {\n    key: \"getChainId\",\n    value: function () {\n      var _getChainId = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee16() {\n        return _regenerator.default.wrap(function (_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                if (!this.ensureWeb3IsInstalled()) {\n                  _context24.next = 4;\n                  break;\n                }\n\n                _context24.next = 3;\n                return this.web3.eth.net.getId();\n\n              case 3:\n                return _context24.abrupt(\"return\", _context24.sent);\n\n              case 4:\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 5:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      return function () {\n        return _getChainId.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"ensureWeb3IsInstalled\",\n    value: function () {\n      return this.web3 ? true : false;\n    }\n  }, {\n    key: \"isMetaMaskInstalled\",\n    value: function () {\n      var _isMetaMaskInstalled = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee17() {\n        return _regenerator.default.wrap(function (_context25) {\n          while (1) {\n            switch (_context25.prev = _context25.next) {\n              case 0:\n                _context25.next = 2;\n                return (0, _detectProvider.default)();\n\n              case 2:\n                if (!_context25.sent) {\n                  _context25.next = 6;\n                  break;\n                }\n\n                _context25.t0 = true;\n                _context25.next = 7;\n                break;\n\n              case 6:\n                _context25.t0 = false;\n\n              case 7:\n                return _context25.abrupt(\"return\", _context25.t0);\n\n              case 8:\n              case \"end\":\n                return _context25.stop();\n            }\n          }\n        }, _callee17);\n      }));\n\n      return function () {\n        return _isMetaMaskInstalled.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"switchNetwork\",\n    value: function () {\n      var _switchNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee18(chainId) {\n        var currentNetwork;\n        return _regenerator.default.wrap(function (_context26) {\n          while (1) {\n            switch (_context26.prev = _context26.next) {\n              case 0:\n                chainId = verifyChainId(chainId); // Check if the user wallet is already on `chainId`\n\n                _context26.t0 = fromDecimalToHex;\n                _context26.next = 4;\n                return this.getChainId();\n\n              case 4:\n                _context26.t1 = _context26.sent;\n                currentNetwork = (0, _context26.t0)(_context26.t1);\n\n                if (!(currentNetwork === chainId)) {\n                  _context26.next = 8;\n                  break;\n                }\n\n                return _context26.abrupt(\"return\");\n\n              case 8:\n                _context26.next = 10;\n                return window.ethereum.request({\n                  method: 'wallet_switchEthereumChain',\n                  params: [{\n                    chainId: chainId\n                  }]\n                });\n\n              case 10:\n              case \"end\":\n                return _context26.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      return function () {\n        return _switchNetwork.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"addNetwork\",\n    value: function () {\n      var _addNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee19(chainId, chainName, currencyName, currencySymbol, rpcUrl, blockExplorerUrl) {\n        return _regenerator.default.wrap(function (_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                chainId = verifyChainId(chainId);\n                _context27.next = 3;\n                return window.ethereum.request({\n                  method: 'wallet_addEthereumChain',\n                  params: [{\n                    chainId: chainId,\n                    chainName: chainName,\n                    nativeCurrency: {\n                      name: currencyName,\n                      symbol: currencySymbol,\n                      decimals: 18\n                    },\n                    rpcUrls: [rpcUrl],\n                    blockExplorerUrls: [blockExplorerUrl]\n                  }]\n                });\n\n              case 3:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee19);\n      }));\n\n      return function () {\n        return _addNetwork.apply(this, arguments);\n      };\n    }()\n  }]);\n  return MoralisWeb3;\n}();\n\n(0, _defineProperty2.default)(MoralisWeb3, \"speedyNodeApiKey\", void 0);\n(0, _defineProperty2.default)(MoralisWeb3, \"memoryCard\", {\n  save: function (what) {\n    this.saved = what;\n  },\n  get: function (where) {\n    if (!this.saved) throw new Error('Nothing saved to memory card'); // In case the saved data is not an object but a simple string or number\n\n    if (where.length === 0) return this.getSaved();\n    var tmp;\n    var savedTmp = this.saved;\n\n    for (var i = 0; i < where.length; i++) {\n      tmp = savedTmp[where[i]];\n      savedTmp = tmp;\n    }\n\n    return savedTmp;\n  },\n  getSaved: function () {\n    return this.saved;\n  },\n  deleteSaved: function () {\n    this.saved = undefined;\n  }\n});\n\nfunction fromDecimalToHex(number) {\n  if (typeof number !== 'number') throw 'The input provided should be a number';\n  return \"0x\".concat(number.toString(16));\n}\n\nfunction verifyChainId(chainId) {\n  // Check if chainId is a number, in that case convert to hex\n  if (typeof chainId === 'number') chainId = fromDecimalToHex(chainId);\n  return chainId;\n}\n\nMoralisWeb3.onConnect = (0, _bind.default)(_context28 = MoralisWeb3.on).call(_context28, MoralisWeb3, EthereumEvents.CONNECT);\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context29 = MoralisWeb3.on).call(_context29, MoralisWeb3, EthereumEvents.DISCONNECT);\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context30 = MoralisWeb3.on).call(_context30, MoralisWeb3, EthereumEvents.CHAIN_CHANGED);\nMoralisWeb3.onAccountsChanged = (0, _bind.default)(_context31 = MoralisWeb3.on).call(_context31, MoralisWeb3, EthereumEvents.ACCOUNTS_CHANGED);\nvar _default = MoralisWeb3;\nexports.default = _default;","map":{"version":3,"sources":["/Users/jedi/Desktop/Development/REACT/deployed_treasureblox_dapp/node_modules/moralis/lib/browser/MoralisWeb3.js"],"names":["_interopRequireDefault","require","_Object$defineProperty","_Array$isArray","_getIteratorMethod","_Symbol","_Array$from","_sliceInstanceProperty","exports","value","default","EthereumEvents","_bind","_values","_toConsumableArray2","_find","_typeof2","_stringify","_forEach","_concat","_slicedToArray2","_map","_regenerator","_asyncToGenerator2","_construct2","_classCallCheck2","_createClass2","_defineProperty2","_indexOf","_filter","_web","_ParseObject","_ParseQuery","_ParseUser","_ParseACL","_MoralisErd","_MoralisDot","_MoralisWalletConnectProvider","_MoralisCustomProvider","_MoralisInjectedProvider","_TransferUtils","_Cloud","_detectProvider","_createSigningData","_context28","_context29","_context30","_context31","_createForOfIteratorHelper","o","allowArrayLike","it","_unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_context32","_arrayLikeToArray","Object","prototype","toString","constructor","name","test","arr","len","arr2","Array","EventEmitter","CONNECT","DISCONNECT","ACCOUNTS_CHANGED","CHAIN_CHANGED","WARNING","ERROR_WEB3_MISSING","uniq","v","MoralisWeb3","MWeb3","window","Web3","_len","arguments","args","_key","key","ensureWeb3IsInstalled","fn","customEnableWeb3","_enableWeb","mark","_callee","options","web3","Web3Provider","web3Provider","wrap","_context","prev","sent","speedyNodeApiKey","provider","getWeb3Provider","activeWeb3Provider","activate","abrupt","stop","apply","_enable","_callee2","_context2","console","warn","enableWeb3","type","_cleanup","_callee3","_context3","deactivate","cleanupStaleData","_authenticate","_callee4","_context4","_user$get","isLoggedIn","message","data","accounts","accountsLower","_accountsLower","ethAddress","signature","authData","user","_context5","currentAsync","logOut","cleanup","isDotAuth","authenticate","isElrondAuth","signingMessage","getSigningData","eth","getAccounts","toLowerCase","Error","personal","sign","id","logInWith","setACL","set","get","save","_link","_callee5","account","_context6","_user$get2","EthAddress","query","ethAddressRecord","_context7","extend","catch","linkWith","_unlink","_callee6","_user$get3","nextAccounts","_context8","destroy","_unlinkFrom","_initPlugins","_callee8","installedPlugins","_this","specs","allPlugins","_context12","t0","run","Plugins","plugin","_context9","functions","_ref","_callee7","params","_context10","response","error","triggerReturn","_context11","concat","success","disableTriggers","handleTriggers","result","triggers","_handleTriggers","_callee11","triggersArray","payload","_this2","_loop","_ret","_context18","_triggersArray$i","_triggersArray$i2","_triggersArray$i2$opt","_triggersArray$i3","_triggersArray$i3$opt","_triggersArray$i4","_triggersArray$i5","_triggersArray$i5$opt","_triggersArray$i6","_triggersArray$i7","_triggersArray$i8","_triggersArray$i9","_triggersArray$i10","_triggersArray$i11","_triggersArray$i12","_triggersArray$i13","_triggersArray$i14","_triggersArray$i15","_triggersArray$i16","_triggersArray$i17","_triggersArray$i18","_triggersArray$i19","_triggersArray$i20","_triggersArray$i21","_triggersArray$i22","_triggersArray$i23","_triggersArray$i24","_triggersArray$i25","_triggersArray$i27","_triggersArray$i29","_triggersArray$i30","_triggersArray$i31","_context13","_context14","_context17","newTab","hasOwnProperty","open","shouldAwait","sendTransaction","saveResponse","memoryCard","shouldReturnPayload","shouldReturnResponse","signer","utils","isAddress","pluginName","endpoint","useSavedResponse","savedResponseAs","savedResponseAt","runResponseTrigger","parameters","from","currentProvider","send","method","_ref2","_callee9","_triggersArray$i26","_context15","_ref3","_callee10","_triggersArray$i28","_context16","delegateYield","deleteSaved","_getAllERC","_callee12","_ref4","chain","address","_args13","_context19","undefined","_getERC","_callee13","_ref5","symbol","tokenAddress","_args14","_context20","_ref6","_ref6$chain","_ref6$address","_ref7","_ref7$chain","_ref7$address","_ref8","_ref8$chain","_ref8$address","_ref8$order","order","_ref9","_ref9$chain","_ref9$address","_transfer","_callee14","_ref10","_ref10$type","_ref10$receiver","receiver","_ref10$contractAddres","contractAddress","contract_address","_ref10$amount","amount","_ref10$tokenId","tokenId","token_id","_ref10$system","system","_ref10$awaitReceipt","awaitReceipt","sender","transferOperation","customToken","transferEvents","_args15","_context21","isSupportedType","validateInput","isUint256","Contract","abi","to","methods","transfer","safeTransferFrom","on","hash","emit","receipt","confirmationNumber","_executeFunction","_callee15","_context22","_ref11","functionName","msgValue","_ref11$awaitReceipt","_ref11$params","contractOptions","functionData","stateMutability","isReadFunction","currentAddress","errors","_iterator","_step","input","parsedInputs","contract","customFunction","contractExecuteEvents","_args16","_context23","x","inputs","push","eventName","cb","_window","ethereum","_getChainId","_callee16","_context24","net","getId","_isMetaMaskInstalled","_callee17","_context25","_switchNetwork","_callee18","chainId","currentNetwork","_context26","verifyChainId","fromDecimalToHex","getChainId","t1","request","_addNetwork","_callee19","chainName","currencyName","currencySymbol","rpcUrl","blockExplorerUrl","_context27","nativeCurrency","decimals","rpcUrls","blockExplorerUrls","what","saved","where","getSaved","tmp","savedTmp","number","onConnect","onDisconnect","onChainChanged","onAccountsChanged","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Array$isArray = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.EthereumEvents = void 0;\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _construct2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/construct\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _web = _interopRequireDefault(require(\"web3\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\n\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\n\nvar _MoralisWalletConnectProvider = _interopRequireDefault(require(\"./MoralisWalletConnectProvider\"));\n\nvar _MoralisCustomProvider = _interopRequireDefault(require(\"./MoralisCustomProvider\"));\n\nvar _MoralisInjectedProvider = _interopRequireDefault(require(\"./MoralisInjectedProvider\"));\n\nvar _TransferUtils = _interopRequireDefault(require(\"./TransferUtils\"));\n\nvar _Cloud = require(\"./Cloud\");\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n\nvar _context28, _context29, _context30, _context31;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof _Symbol !== \"undefined\" && _getIteratorMethod(o) || o[\"@@iterator\"];\n\n  if (!it) {\n    if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context32;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context32 = Object.prototype.toString.call(o)).call(_context32, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar EventEmitter = require('events');\n\nvar EthereumEvents = {\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged'\n};\nexports.EthereumEvents = EthereumEvents;\nvar WARNING = 'Non ethereum enabled browser';\nvar ERROR_WEB3_MISSING = 'Missing web3 instance, make sure to call Moralis.enableWeb3() or Moralis.authenticate()';\n\nfunction uniq(arr) {\n  return (0, _filter.default)(arr).call(arr, function (v, i) {\n    return (0, _indexOf.default)(arr).call(arr, v) === i;\n  });\n}\n\nvar MoralisWeb3 = /*#__PURE__*/function () {\n  function MoralisWeb3() {\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\n    var MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _construct2.default)(MWeb3, args);\n  }\n\n  (0, _createClass2.default)(MoralisWeb3, null, [{\n    key: \"isWeb3Enabled\",\n    value: function () {\n      return this.ensureWeb3IsInstalled();\n    }\n  }, {\n    key: \"setEnableWeb3\",\n    value: function (fn) {\n      this.customEnableWeb3 = fn;\n    }\n  }, {\n    key: \"enableWeb3\",\n    value: function () {\n      var _enableWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options) {\n        var web3, Web3Provider, web3Provider;\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.customEnableWeb3) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.customEnableWeb3(options);\n\n              case 3:\n                web3 = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 6:\n                if (this.speedyNodeApiKey) {\n                  options.speedyNodeApiKey = this.speedyNodeApiKey;\n                  options.provider = 'custom';\n                }\n\n                Web3Provider = MoralisWeb3.getWeb3Provider(options);\n                web3Provider = new Web3Provider();\n                this.activeWeb3Provider = web3Provider;\n                _context.next = 12;\n                return web3Provider.activate(options);\n\n              case 12:\n                web3 = _context.sent;\n\n              case 13:\n                this.web3 = web3;\n                return _context.abrupt(\"return\", web3);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function () {\n        return _enableWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"enable\",\n    value: function () {\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options) {\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // eslint-disable-next-line no-console\n                console.warn('Moralis.enable() is deprecated and will be removed, use Moralis.enableWeb3() instead.');\n                return _context2.abrupt(\"return\", this.enableWeb3(options));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _enable.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"isDotAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'dot':\n        case 'polkadot':\n        case 'kusama':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isElrondAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'erd':\n        case 'elrond':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getWeb3Provider\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.provider) {\n        case 'walletconnect':\n        case 'walletConnect':\n        case 'wc':\n          return _MoralisWalletConnectProvider.default;\n\n        case 'custom':\n          return _MoralisCustomProvider.default;\n\n        default:\n          return _MoralisInjectedProvider.default;\n      }\n    }\n  }, {\n    key: \"cleanup\",\n    value: function () {\n      var _cleanup = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.activeWeb3Provider) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                _context3.next = 3;\n                return this.activeWeb3Provider.deactivate();\n\n              case 3:\n                // Prevent a bug when there is stale data active\n                _MoralisWalletConnectProvider.default.cleanupStaleData();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function () {\n        return _cleanup.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(options) {\n        var _context4, _user$get;\n\n        var isLoggedIn, web3, message, data, accounts, accountsLower, _accountsLower, ethAddress, signature, authData, user;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return _ParseUser.default.currentAsync();\n\n              case 2:\n                isLoggedIn = _context5.sent;\n\n                if (!isLoggedIn) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                _context5.next = 6;\n                return _ParseUser.default.logOut();\n\n              case 6:\n                _context5.next = 8;\n                return MoralisWeb3.cleanup();\n\n              case 8:\n                if (!MoralisWeb3.isDotAuth(options)) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _MoralisDot.default.authenticate(options));\n\n              case 10:\n                if (!MoralisWeb3.isElrondAuth(options)) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _MoralisErd.default.authenticate(options));\n\n              case 12:\n                _context5.next = 14;\n                return this.enableWeb3(options);\n\n              case 14:\n                web3 = _context5.sent;\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context5.next = 18;\n                return (0, _createSigningData.default)(message);\n\n              case 18:\n                data = _context5.sent;\n                _context5.next = 21;\n                return web3.eth.getAccounts();\n\n              case 21:\n                accounts = _context5.sent;\n                accountsLower = (0, _map.default)(accounts).call(accounts, function (v) {\n                  return v.toLowerCase();\n                });\n                _accountsLower = (0, _slicedToArray2.default)(accountsLower, 1), ethAddress = _accountsLower[0];\n\n                if (ethAddress) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                throw new Error('Address not found');\n\n              case 26:\n                _context5.next = 28;\n                return web3.eth.personal.sign(data, ethAddress, '');\n\n              case 28:\n                signature = _context5.sent;\n\n                if (signature) {\n                  _context5.next = 31;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 31:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context5.next = 34;\n                return _ParseUser.default.logInWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 34:\n                user = _context5.sent;\n                _context5.next = 37;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 37:\n                if (user) {\n                  _context5.next = 39;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 39:\n                user.set('accounts', uniq((0, _concat.default)(_context4 = []).call(_context4, accountsLower, (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [])));\n                user.set('ethAddress', ethAddress);\n                _context5.next = 43;\n                return user.save(null, options);\n\n              case 43:\n                return _context5.abrupt(\"return\", user);\n\n              case 44:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account, options) {\n        var _context6, _user$get2;\n\n        var web3, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\n        return _regenerator.default.wrap(function (_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return MoralisWeb3.enableWeb3(options);\n\n              case 2:\n                web3 = _context7.sent;\n                data = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context7.next = 6;\n                return _ParseUser.default.currentAsync();\n\n              case 6:\n                user = _context7.sent;\n                ethAddress = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context7.next = 12;\n                return query.get(ethAddress).catch(function () {\n                  return null;\n                });\n\n              case 12:\n                ethAddressRecord = _context7.sent;\n\n                if (ethAddressRecord) {\n                  _context7.next = 20;\n                  break;\n                }\n\n                _context7.next = 16;\n                return web3.eth.personal.sign(data, account, '');\n\n              case 16:\n                signature = _context7.sent;\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context7.next = 20;\n                return user.linkWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 20:\n                user.set('accounts', uniq((0, _concat.default)(_context6 = [ethAddress]).call(_context6, (_user$get2 = user.get('accounts')) !== null && _user$get2 !== void 0 ? _user$get2 : [])));\n                user.set('ethAddress', ethAddress);\n                _context7.next = 24;\n                return user.save(null, options);\n\n              case 24:\n                return _context7.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(account) {\n        var _user$get3;\n\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context8.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                ethAddressRecord = _context8.sent;\n                _context8.next = 8;\n                return ethAddressRecord.destroy();\n\n              case 8:\n                _context8.next = 10;\n                return _ParseUser.default.currentAsync();\n\n              case 10:\n                user = _context8.sent;\n                accounts = (_user$get3 = user.get('accounts')) !== null && _user$get3 !== void 0 ? _user$get3 : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('accounts', nextAccounts);\n                user.set('ethAddress', nextAccounts[0]);\n                _context8.next = 17;\n                return user._unlinkFrom('moralisEth');\n\n              case 17:\n                _context8.next = 19;\n                return user.save();\n\n              case 19:\n                return _context8.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"initPlugins\",\n    value: function () {\n      var _initPlugins = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(installedPlugins) {\n        var _this = this;\n\n        var specs, allPlugins;\n        return _regenerator.default.wrap(function (_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.t0 = installedPlugins;\n\n                if (_context12.t0) {\n                  _context12.next = 5;\n                  break;\n                }\n\n                _context12.next = 4;\n                return (0, _Cloud.run)('getPluginSpecs');\n\n              case 4:\n                _context12.t0 = _context12.sent;\n\n              case 5:\n                specs = _context12.t0;\n                if (!this.Plugins) this.Plugins = {};\n\n                if (specs) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 9:\n                allPlugins = this.Plugins;\n                (0, _forEach.default)(specs).call(specs, function (plugin) {\n                  var _context9;\n\n                  allPlugins[plugin.name] = {};\n                  (0, _forEach.default)(_context9 = plugin.functions).call(_context9, function (f) {\n                    allPlugins[plugin.name][f] = /*#__PURE__*/function () {\n                      var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(params, options) {\n                        var _context10;\n\n                        var response, error, triggerReturn;\n                        return _regenerator.default.wrap(function (_context11) {\n                          while (1) {\n                            switch (_context11.prev = _context11.next) {\n                              case 0:\n                                if (!options) options = {};\n                                _context11.next = 3;\n                                return (0, _Cloud.run)((0, _concat.default)(_context10 = \"\".concat(plugin.name, \"_\")).call(_context10, f), params);\n\n                              case 3:\n                                response = _context11.sent;\n\n                                if (response.data.success) {\n                                  _context11.next = 7;\n                                  break;\n                                }\n\n                                error = (0, _stringify.default)(response.data.data, null, 2);\n                                throw new Error(\"Something went wrong\\n\".concat(error));\n\n                              case 7:\n                                if (!(options.disableTriggers !== true)) {\n                                  _context11.next = 13;\n                                  break;\n                                }\n\n                                _context11.next = 10;\n                                return _this.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                              case 10:\n                                triggerReturn = _context11.sent;\n\n                                if (!triggerReturn) {\n                                  _context11.next = 13;\n                                  break;\n                                }\n\n                                return _context11.abrupt(\"return\", triggerReturn);\n\n                              case 13:\n                                return _context11.abrupt(\"return\", response.data.result);\n\n                              case 14:\n                              case \"end\":\n                                return _context11.stop();\n                            }\n                          }\n                        }, _callee7);\n                      }));\n\n                      return function () {\n                        return _ref.apply(this, arguments);\n                      };\n                    }();\n                  });\n                });\n                this.Plugins = allPlugins;\n\n              case 12:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      return function () {\n        return _initPlugins.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleTriggers\",\n    value: function () {\n      var _handleTriggers = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11(triggersArray, payload) {\n        var _this2 = this;\n\n        var response, _loop, i, _ret;\n\n        return _regenerator.default.wrap(function (_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                if (triggersArray) {\n                  _context18.next = 2;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\");\n\n              case 2:\n                _loop = /*#__PURE__*/_regenerator.default.mark(function _loop(i) {\n                  var _triggersArray$i, _triggersArray$i2, _triggersArray$i2$opt, _triggersArray$i3, _triggersArray$i3$opt, _triggersArray$i4, _triggersArray$i5, _triggersArray$i5$opt, _triggersArray$i6, _triggersArray$i7, _triggersArray$i8, _triggersArray$i9, _triggersArray$i10, _triggersArray$i11, _triggersArray$i12, _triggersArray$i13, _triggersArray$i14, _triggersArray$i15, _triggersArray$i16, _triggersArray$i17, _triggersArray$i18, _triggersArray$i19, _triggersArray$i20, _triggersArray$i21, _triggersArray$i22, _triggersArray$i23, _triggersArray$i24, _triggersArray$i25, _triggersArray$i27, _triggersArray$i29, _triggersArray$i30, _triggersArray$i31;\n\n                  var _context13, _context14;\n\n                  return _regenerator.default.wrap(function (_context17) {\n                    while (1) {\n                      switch (_context17.prev = _context17.next) {\n                        case 0:\n                          _context17.t0 = (_triggersArray$i = triggersArray[i]) === null || _triggersArray$i === void 0 ? void 0 : _triggersArray$i.name;\n                          _context17.next = _context17.t0 === 'openUrl' ? 3 : _context17.t0 === 'web3Transaction' ? 6 : _context17.t0 === 'web3Sign' ? 19 : _context17.t0 === 'callPluginEndpoint' ? 36 : _context17.t0 === 'web3SignV4' ? 58 : 73;\n                          break;\n\n                        case 3:\n                          // Open url in a new tab\n                          if (((_triggersArray$i2 = triggersArray[i]) === null || _triggersArray$i2 === void 0 ? void 0 : (_triggersArray$i2$opt = _triggersArray$i2.options) === null || _triggersArray$i2$opt === void 0 ? void 0 : _triggersArray$i2$opt.newTab) === true || !((_triggersArray$i3 = triggersArray[i]) !== null && _triggersArray$i3 !== void 0 && (_triggersArray$i3$opt = _triggersArray$i3.options) !== null && _triggersArray$i3$opt !== void 0 && _triggersArray$i3$opt.hasOwnProperty('newTab'))) window.open((_triggersArray$i4 = triggersArray[i]) === null || _triggersArray$i4 === void 0 ? void 0 : _triggersArray$i4.data); // Open url in the same tab\n\n                          if (((_triggersArray$i5 = triggersArray[i]) === null || _triggersArray$i5 === void 0 ? void 0 : (_triggersArray$i5$opt = _triggersArray$i5.options) === null || _triggersArray$i5$opt === void 0 ? void 0 : _triggersArray$i5$opt.newTab) === false) window.open((_triggersArray$i6 = triggersArray[i]) === null || _triggersArray$i6 === void 0 ? void 0 : _triggersArray$i6.data, '_self');\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 6:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 8;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 8:\n                          if (!(((_triggersArray$i7 = triggersArray[i]) === null || _triggersArray$i7 === void 0 ? void 0 : _triggersArray$i7.shouldAwait) === true)) {\n                            _context17.next = 12;\n                            break;\n                          }\n\n                          _context17.next = 11;\n                          return _this2.web3.eth.sendTransaction((_triggersArray$i8 = triggersArray[i]) === null || _triggersArray$i8 === void 0 ? void 0 : _triggersArray$i8.data);\n\n                        case 11:\n                          response = _context17.sent;\n\n                        case 12:\n                          // Trigger a web3 transaction (does NOT await)\n                          if (((_triggersArray$i9 = triggersArray[i]) === null || _triggersArray$i9 === void 0 ? void 0 : _triggersArray$i9.shouldAwait) === false) response = _this2.web3.eth.sendTransaction((_triggersArray$i10 = triggersArray[i]) === null || _triggersArray$i10 === void 0 ? void 0 : _triggersArray$i10.data); // Save the response returned by the web3 trasanction\n\n                          if (((_triggersArray$i11 = triggersArray[i]) === null || _triggersArray$i11 === void 0 ? void 0 : _triggersArray$i11.saveResponse) === true) _this2.memoryCard.save(response); // Return payload and response\n\n                          if (!(((_triggersArray$i12 = triggersArray[i]) === null || _triggersArray$i12 === void 0 ? void 0 : _triggersArray$i12.shouldReturnPayload) === true)) {\n                            _context17.next = 16;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 16:\n                          if (!(((_triggersArray$i13 = triggersArray[i]) === null || _triggersArray$i13 === void 0 ? void 0 : _triggersArray$i13.shouldReturnResponse) === true)) {\n                            _context17.next = 18;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 18:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 19:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 21;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 21:\n                          if (triggersArray[i].message) {\n                            _context17.next = 23;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger does not have a message to sign');\n\n                        case 23:\n                          if (!(!triggersArray[i].signer || !_this2.web3.utils.isAddress(triggersArray[i].signer))) {\n                            _context17.next = 25;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger signer address missing or invalid');\n\n                        case 25:\n                          if (!(((_triggersArray$i14 = triggersArray[i]) === null || _triggersArray$i14 === void 0 ? void 0 : _triggersArray$i14.shouldAwait) === true)) {\n                            _context17.next = 29;\n                            break;\n                          }\n\n                          _context17.next = 28;\n                          return _this2.web3.eth.personal.sign(triggersArray[i].message, triggersArray[i].signer);\n\n                        case 28:\n                          response = _context17.sent;\n\n                        case 29:\n                          // Sign a message using web3 (does NOT await)\n                          if (((_triggersArray$i15 = triggersArray[i]) === null || _triggersArray$i15 === void 0 ? void 0 : _triggersArray$i15.shouldAwait) === false) response = _this2.web3.eth.personal.sign(triggersArray[i].message, triggersArray[i].signer); // Save response\n\n                          if (((_triggersArray$i16 = triggersArray[i]) === null || _triggersArray$i16 === void 0 ? void 0 : _triggersArray$i16.saveResponse) === true) _this2.memoryCard.save(response); // Return payload and response\n\n                          if (!(((_triggersArray$i17 = triggersArray[i]) === null || _triggersArray$i17 === void 0 ? void 0 : _triggersArray$i17.shouldReturnPayload) === true)) {\n                            _context17.next = 33;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 33:\n                          if (!(((_triggersArray$i18 = triggersArray[i]) === null || _triggersArray$i18 === void 0 ? void 0 : _triggersArray$i18.shouldReturnResponse) === true)) {\n                            _context17.next = 35;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 35:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 36:\n                          if (triggersArray[i].pluginName) {\n                            _context17.next = 38;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an plugin name to call');\n\n                        case 38:\n                          if (triggersArray[i].endpoint) {\n                            _context17.next = 40;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an endpoint to call');\n\n                        case 40:\n                          if (!(((_triggersArray$i19 = triggersArray[i]) === null || _triggersArray$i19 === void 0 ? void 0 : _triggersArray$i19.shouldAwait) === true)) {\n                            _context17.next = 45;\n                            break;\n                          } // Check if a saved response has to be used to fill a parameter needed by the plugin\n\n\n                          if (triggersArray[i].useSavedResponse === true) {\n                            triggersArray[i].params[triggersArray[i].savedResponseAs] = _this2.memoryCard.get(triggersArray[i].savedResponseAt);\n                          } // Call the endpoint\n\n\n                          _context17.next = 44;\n                          return (0, _Cloud.run)((0, _concat.default)(_context13 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context13, triggersArray[i].endpoint), triggersArray[i].params);\n\n                        case 44:\n                          response = _context17.sent;\n\n                        case 45:\n                          // Call a plugin endpoint (does NOT await)\n                          if (((_triggersArray$i20 = triggersArray[i]) === null || _triggersArray$i20 === void 0 ? void 0 : _triggersArray$i20.shouldAwait) === false) {\n                            // Check if a saved response has to be used to fill a parameter needed by the plugin\n                            if (triggersArray[i].useSavedResponse === true) {\n                              triggersArray[i].params[triggersArray[i].savedResponseAs] = _this2.memoryCard.get(triggersArray[i].savedResponseAt);\n                            } // Call the endpoint\n\n\n                            response = (0, _Cloud.run)((0, _concat.default)(_context14 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context14, triggersArray[i].endpoint), triggersArray[i].params);\n                          } // If the response contains a trigger, run it\n\n\n                          if (!(triggersArray[i].runResponseTrigger === true)) {\n                            _context17.next = 50;\n                            break;\n                          }\n\n                          _context17.next = 49;\n                          return _this2.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                        case 49:\n                          response = _context17.sent;\n\n                        case 50:\n                          // Save response\n                          if (((_triggersArray$i21 = triggersArray[i]) === null || _triggersArray$i21 === void 0 ? void 0 : _triggersArray$i21.saveResponse) === true) _this2.memoryCard.save(response); // If should not run the response trigger, continues the loop and does not return (to avoid breaking the loop execution and run other pending triggers)\n\n                          if (!(((_triggersArray$i22 = triggersArray[i]) === null || _triggersArray$i22 === void 0 ? void 0 : _triggersArray$i22.runResponseTrigger) === false)) {\n                            _context17.next = 53;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", \"continue\");\n\n                        case 53:\n                          if (!(((_triggersArray$i23 = triggersArray[i]) === null || _triggersArray$i23 === void 0 ? void 0 : _triggersArray$i23.shouldReturnPayload) === true)) {\n                            _context17.next = 55;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: 'payload',\n                              response: response\n                            }\n                          });\n\n                        case 55:\n                          if (!(((_triggersArray$i24 = triggersArray[i]) === null || _triggersArray$i24 === void 0 ? void 0 : _triggersArray$i24.shouldReturnResponse) === true)) {\n                            _context17.next = 57;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 57:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 58:\n                          if (_this2.ensureWeb3IsInstalled()) {\n                            _context17.next = 60;\n                            break;\n                          }\n\n                          throw new Error(ERROR_WEB3_MISSING);\n\n                        case 60:\n                          if (triggersArray[i].parameters) {\n                            _context17.next = 62;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have `parameters` to sign');\n\n                        case 62:\n                          if (triggersArray[i].from) {\n                            _context17.next = 64;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have a `from` address');\n\n                        case 64:\n                          if (!(((_triggersArray$i25 = triggersArray[i]) === null || _triggersArray$i25 === void 0 ? void 0 : _triggersArray$i25.shouldAwait) === true)) {\n                            _context17.next = 67;\n                            break;\n                          }\n\n                          _context17.next = 67;\n                          return _this2.web3.currentProvider.send({\n                            method: 'eth_signTypedData_v4',\n                            params: triggersArray[i].parameters,\n                            from: triggersArray[i].from\n                          },\n                          /*#__PURE__*/\n                          // eslint-disable-next-line no-loop-func\n                          function () {\n                            var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(error, result) {\n                              var _triggersArray$i26;\n\n                              return _regenerator.default.wrap(function (_context15) {\n                                while (1) {\n                                  switch (_context15.prev = _context15.next) {\n                                    case 0:\n                                      if (!error) {\n                                        _context15.next = 2;\n                                        break;\n                                      }\n\n                                      throw new Error(error.message || error);\n\n                                    case 2:\n                                      // Save response\n                                      if (((_triggersArray$i26 = triggersArray[i]) === null || _triggersArray$i26 === void 0 ? void 0 : _triggersArray$i26.saveResponse) === true) _this2.memoryCard.save(result);\n                                      response = result;\n\n                                    case 4:\n                                    case \"end\":\n                                      return _context15.stop();\n                                  }\n                                }\n                              }, _callee9);\n                            }));\n\n                            return function () {\n                              return _ref2.apply(this, arguments);\n                            };\n                          }());\n\n                        case 67:\n                          if (((_triggersArray$i27 = triggersArray[i]) === null || _triggersArray$i27 === void 0 ? void 0 : _triggersArray$i27.shouldAwait) === false) {\n                            _this2.web3.currentProvider.send({\n                              method: 'eth_signTypedData_v4',\n                              params: triggersArray[i].parameters,\n                              from: triggersArray[i].from\n                            },\n                            /*#__PURE__*/\n                            // eslint-disable-next-line no-loop-func\n                            function () {\n                              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10(error, result) {\n                                var _triggersArray$i28;\n\n                                return _regenerator.default.wrap(function (_context16) {\n                                  while (1) {\n                                    switch (_context16.prev = _context16.next) {\n                                      case 0:\n                                        if (!error) {\n                                          _context16.next = 2;\n                                          break;\n                                        }\n\n                                        throw new Error(error.message || error);\n\n                                      case 2:\n                                        // Save response\n                                        if (((_triggersArray$i28 = triggersArray[i]) === null || _triggersArray$i28 === void 0 ? void 0 : _triggersArray$i28.saveResponse) === true) _this2.memoryCard.save(result);\n                                        response = result;\n\n                                      case 4:\n                                      case \"end\":\n                                        return _context16.stop();\n                                    }\n                                  }\n                                }, _callee10);\n                              }));\n\n                              return function () {\n                                return _ref3.apply(this, arguments);\n                              };\n                            }());\n                          } // Return payload and response\n\n\n                          if (!(((_triggersArray$i29 = triggersArray[i]) === null || _triggersArray$i29 === void 0 ? void 0 : _triggersArray$i29.shouldReturnPayload) === true)) {\n                            _context17.next = 70;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: response\n                            }\n                          });\n\n                        case 70:\n                          if (!(((_triggersArray$i30 = triggersArray[i]) === null || _triggersArray$i30 === void 0 ? void 0 : _triggersArray$i30.shouldReturnResponse) === true)) {\n                            _context17.next = 72;\n                            break;\n                          }\n\n                          return _context17.abrupt(\"return\", {\n                            v: response\n                          });\n\n                        case 72:\n                          return _context17.abrupt(\"break\", 74);\n\n                        case 73:\n                          throw new Error(\"Unknown trigger: \\\"\".concat((_triggersArray$i31 = triggersArray[i]) === null || _triggersArray$i31 === void 0 ? void 0 : _triggersArray$i31.name, \"\\\"\"));\n\n                        case 74:\n                        case \"end\":\n                          return _context17.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                i = 0;\n\n              case 4:\n                if (!(i < triggersArray.length)) {\n                  _context18.next = 14;\n                  break;\n                }\n\n                return _context18.delegateYield(_loop(i), \"t0\", 6);\n\n              case 6:\n                _ret = _context18.t0;\n\n                if (!(_ret === \"continue\")) {\n                  _context18.next = 9;\n                  break;\n                }\n\n                return _context18.abrupt(\"continue\", 11);\n\n              case 9:\n                if (!((0, _typeof2.default)(_ret) === \"object\")) {\n                  _context18.next = 11;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\", _ret.v);\n\n              case 11:\n                i++;\n                _context18.next = 4;\n                break;\n\n              case 14:\n                // Delete all saved data\n                this.memoryCard.deleteSaved();\n\n              case 15:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      return function () {\n        return _handleTriggers.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllERC20\",\n    value: function () {\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        var _ref4,\n            chain,\n            address,\n            result,\n            _args13 = arguments;\n\n        return _regenerator.default.wrap(function (_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _ref4 = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : {}, chain = _ref4.chain, address = _ref4.address;\n                _context19.next = 3;\n                return (0, _Cloud.run)('getAllERC20', {\n                  chain: chain,\n                  address: address\n                });\n\n              case 3:\n                result = _context19.sent;\n                return _context19.abrupt(\"return\", result);\n\n              case 5:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee12);\n      }));\n\n      return function () {\n        return _getAllERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getERC20\",\n    value: function () {\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13() {\n        var _ref5,\n            chain,\n            address,\n            symbol,\n            tokenAddress,\n            result,\n            _args14 = arguments;\n\n        return _regenerator.default.wrap(function (_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _ref5 = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {}, chain = _ref5.chain, address = _ref5.address, symbol = _ref5.symbol, tokenAddress = _ref5.tokenAddress;\n                result = (0, _Cloud.run)('getERC20', {\n                  chain: chain,\n                  address: address,\n                  symbol: symbol,\n                  tokenAddress: tokenAddress\n                });\n                return _context20.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee13);\n      }));\n\n      return function () {\n        return _getERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getNFTs\",\n    value: function () {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$chain = _ref6.chain,\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\n          _ref6$address = _ref6.address,\n          address = _ref6$address === void 0 ? '' : _ref6$address;\n\n      return (0, _Cloud.run)('getNFTs_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getNFTsCount\",\n    value: function () {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$chain = _ref7.chain,\n          chain = _ref7$chain === void 0 ? 'Eth' : _ref7$chain,\n          _ref7$address = _ref7.address,\n          address = _ref7$address === void 0 ? '' : _ref7$address;\n\n      return (0, _Cloud.run)('getNFTsCount_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getTransactions\",\n    value: function () {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref8$chain = _ref8.chain,\n          chain = _ref8$chain === void 0 ? 'Eth' : _ref8$chain,\n          _ref8$address = _ref8.address,\n          address = _ref8$address === void 0 ? '' : _ref8$address,\n          _ref8$order = _ref8.order,\n          order = _ref8$order === void 0 ? 'desc' : _ref8$order;\n\n      return (0, _Cloud.run)('getTransactions', {\n        chain: chain,\n        address: address,\n        order: order\n      });\n    }\n  }, {\n    key: \"getTransactionsCount\",\n    value: function () {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$chain = _ref9.chain,\n          chain = _ref9$chain === void 0 ? 'Eth' : _ref9$chain,\n          _ref9$address = _ref9.address,\n          address = _ref9$address === void 0 ? '' : _ref9$address;\n\n      return (0, _Cloud.run)('getTransactionsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"transfer\",\n    value: function () {\n      var _transfer = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14() {\n        var _ref10,\n            _ref10$type,\n            type,\n            _ref10$receiver,\n            receiver,\n            _ref10$contractAddres,\n            contractAddress,\n            contract_address,\n            _ref10$amount,\n            amount,\n            _ref10$tokenId,\n            tokenId,\n            token_id,\n            _ref10$system,\n            system,\n            _ref10$awaitReceipt,\n            awaitReceipt,\n            options,\n            web3,\n            sender,\n            transferOperation,\n            customToken,\n            transferEvents,\n            _args15 = arguments;\n\n        return _regenerator.default.wrap(function (_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _ref10 = _args15.length > 0 && _args15[0] !== undefined ? _args15[0] : {}, _ref10$type = _ref10.type, type = _ref10$type === void 0 ? 'native' : _ref10$type, _ref10$receiver = _ref10.receiver, receiver = _ref10$receiver === void 0 ? '' : _ref10$receiver, _ref10$contractAddres = _ref10.contractAddress, contractAddress = _ref10$contractAddres === void 0 ? '' : _ref10$contractAddres, contract_address = _ref10.contract_address, _ref10$amount = _ref10.amount, amount = _ref10$amount === void 0 ? '' : _ref10$amount, _ref10$tokenId = _ref10.tokenId, tokenId = _ref10$tokenId === void 0 ? '' : _ref10$tokenId, token_id = _ref10.token_id, _ref10$system = _ref10.system, system = _ref10$system === void 0 ? 'evm' : _ref10$system, _ref10$awaitReceipt = _ref10.awaitReceipt, awaitReceipt = _ref10$awaitReceipt === void 0 ? true : _ref10$awaitReceipt; // Allow snake-case for backwards compatibility\n                // eslint-disable-next-line camelcase\n\n                contractAddress = contractAddress || contract_address; // eslint-disable-next-line camelcase\n\n                tokenId = tokenId || token_id;\n                options = {\n                  receiver: receiver,\n                  contractAddress: contractAddress,\n                  amount: amount,\n                  tokenId: tokenId,\n                  system: system,\n                  awaitReceipt: awaitReceipt\n                };\n\n                _TransferUtils.default.isSupportedType(type);\n\n                _TransferUtils.default.validateInput(type, options);\n\n                if (this.ensureWeb3IsInstalled()) {\n                  _context21.next = 8;\n                  break;\n                }\n\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 8:\n                web3 = this.web3;\n                _context21.next = 11;\n                return web3.eth.getAccounts();\n\n              case 11:\n                _context21.next = 13;\n                return _context21.sent[0];\n\n              case 13:\n                sender = _context21.sent;\n\n                if (sender) {\n                  _context21.next = 16;\n                  break;\n                }\n\n                throw new Error('Sender address not found');\n\n              case 16:\n                if (tokenId) _TransferUtils.default.isUint256(tokenId);\n                if (type !== 'native') customToken = new web3.eth.Contract(_TransferUtils.default.abi[type], contractAddress);\n                _context21.t0 = type;\n                _context21.next = _context21.t0 === 'native' ? 21 : _context21.t0 === 'erc20' ? 23 : _context21.t0 === 'erc721' ? 25 : _context21.t0 === 'erc1155' ? 27 : 29;\n                break;\n\n              case 21:\n                transferOperation = web3.eth.sendTransaction({\n                  from: sender,\n                  to: receiver,\n                  value: amount\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 23:\n                transferOperation = customToken.methods.transfer(receiver, amount).send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 25:\n                transferOperation = customToken.methods.safeTransferFrom(sender, receiver, \"\".concat(tokenId)).send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 27:\n                transferOperation = customToken.methods.safeTransferFrom(sender, receiver, \"\".concat(tokenId), amount, '0x').send({\n                  from: sender\n                });\n                return _context21.abrupt(\"break\", 30);\n\n              case 29:\n                throw new Error(\"Unknown transfer type: \\\"\".concat(type, \"\\\"\"));\n\n              case 30:\n                if (!awaitReceipt) {\n                  _context21.next = 32;\n                  break;\n                }\n\n                return _context21.abrupt(\"return\", transferOperation);\n\n              case 32:\n                transferEvents = new EventEmitter();\n                transferOperation.on('transactionHash', function (hash) {\n                  transferEvents.emit('transactionHash', hash);\n                }).on('receipt', function (receipt) {\n                  transferEvents.emit('receipt', receipt);\n                }).on('confirmation', function (confirmationNumber, receipt) {\n                  transferEvents.emit('confirmation', (confirmationNumber, receipt));\n                }).on('error', function (error) {\n                  transferEvents.emit('error', error);\n                  throw error;\n                });\n                return _context21.abrupt(\"return\", transferEvents);\n\n              case 35:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      return function () {\n        return _transfer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"executeFunction\",\n    value: function () {\n      var _executeFunction = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee15() {\n        var _context22;\n\n        var _ref11,\n            contractAddress,\n            abi,\n            functionName,\n            msgValue,\n            _ref11$awaitReceipt,\n            awaitReceipt,\n            _ref11$params,\n            params,\n            web3,\n            contractOptions,\n            functionData,\n            stateMutability,\n            isReadFunction,\n            currentAddress,\n            errors,\n            _iterator,\n            _step,\n            input,\n            value,\n            parsedInputs,\n            contract,\n            customFunction,\n            response,\n            contractExecuteEvents,\n            _args16 = arguments;\n\n        return _regenerator.default.wrap(function (_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _ref11 = _args16.length > 0 && _args16[0] !== undefined ? _args16[0] : {}, contractAddress = _ref11.contractAddress, abi = _ref11.abi, functionName = _ref11.functionName, msgValue = _ref11.msgValue, _ref11$awaitReceipt = _ref11.awaitReceipt, awaitReceipt = _ref11$awaitReceipt === void 0 ? true : _ref11$awaitReceipt, _ref11$params = _ref11.params, params = _ref11$params === void 0 ? {} : _ref11$params;\n\n                if (this.ensureWeb3IsInstalled()) {\n                  _context23.next = 3;\n                  break;\n                }\n\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 3:\n                web3 = this.web3;\n                contractOptions = {};\n                functionData = (0, _find.default)(abi).call(abi, function (x) {\n                  return x.name === functionName;\n                });\n\n                if (functionData) {\n                  _context23.next = 8;\n                  break;\n                }\n\n                throw new Error('Function does not exist in abi');\n\n              case 8:\n                stateMutability = functionData === null || functionData === void 0 ? void 0 : functionData.stateMutability;\n                isReadFunction = stateMutability === 'view' || stateMutability === 'pure';\n\n                if (isReadFunction) {\n                  _context23.next = 20;\n                  break;\n                }\n\n                if (params.from) {\n                  _context23.next = 20;\n                  break;\n                }\n\n                _context23.next = 14;\n                return web3.eth.getAccounts();\n\n              case 14:\n                _context23.next = 16;\n                return _context23.sent[0];\n\n              case 16:\n                currentAddress = _context23.sent;\n\n                if (currentAddress) {\n                  _context23.next = 19;\n                  break;\n                }\n\n                throw new Error('From address is required');\n\n              case 19:\n                contractOptions.from = currentAddress;\n\n              case 20:\n                errors = [];\n                _iterator = _createForOfIteratorHelper(functionData.inputs);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    input = _step.value;\n                    value = params[input.name];\n\n                    if (!(typeof value !== 'undefined' && value)) {\n                      errors.push(\"\".concat(input.name, \" is required\"));\n                    }\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                if (!(errors.length > 0)) {\n                  _context23.next = 25;\n                  break;\n                }\n\n                throw errors;\n\n              case 25:\n                parsedInputs = (0, _map.default)(_context22 = functionData.inputs).call(_context22, function (x) {\n                  return params[x.name];\n                });\n                contract = new web3.eth.Contract(abi, contractAddress, contractOptions);\n                customFunction = contract.methods[functionName];\n                response = isReadFunction ? customFunction.apply(void 0, (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).call() : customFunction.apply(void 0, (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).send(msgValue ? {\n                  value: msgValue\n                } : null);\n\n                if (!awaitReceipt) {\n                  _context23.next = 31;\n                  break;\n                }\n\n                return _context23.abrupt(\"return\", response);\n\n              case 31:\n                contractExecuteEvents = new EventEmitter();\n                response.on('transactionHash', function (hash) {\n                  contractExecuteEvents.emit('transactionHash', hash);\n                }).on('receipt', function (receipt) {\n                  contractExecuteEvents.emit('receipt', receipt);\n                }).on('confirmation', function (confirmationNumber, receipt) {\n                  contractExecuteEvents.emit('confirmation', (confirmationNumber, receipt));\n                }).on('error', function (error) {\n                  contractExecuteEvents.emit('error', error);\n                  throw error;\n                });\n                return _context23.abrupt(\"return\", contractExecuteEvents);\n\n              case 34:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      return function () {\n        return _executeFunction.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return \"Moralis Authentication\"; // const data = `Moralis Authentication`;\n      // return data;\n    }\n  }, {\n    key: \"on\",\n    value: function (eventName, cb) {\n      var _window = window,\n          ethereum = _window.ethereum;\n\n      if (!ethereum || !ethereum.on) {\n        // eslint-disable-next-line no-console\n        console.warn(WARNING);\n        return function () {\n          // eslint-disable-next-line no-console\n          console.warn(WARNING);\n        };\n      }\n\n      ethereum.on(eventName, cb);\n      return function () {\n        // eslint-disable-next-line no-console\n        console.warn('UNSUB NOT SUPPORTED');\n      };\n    }\n  }, {\n    key: \"getChainId\",\n    value: function () {\n      var _getChainId = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee16() {\n        return _regenerator.default.wrap(function (_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                if (!this.ensureWeb3IsInstalled()) {\n                  _context24.next = 4;\n                  break;\n                }\n\n                _context24.next = 3;\n                return this.web3.eth.net.getId();\n\n              case 3:\n                return _context24.abrupt(\"return\", _context24.sent);\n\n              case 4:\n                throw new Error(ERROR_WEB3_MISSING);\n\n              case 5:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      return function () {\n        return _getChainId.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"ensureWeb3IsInstalled\",\n    value: function () {\n      return this.web3 ? true : false;\n    }\n  }, {\n    key: \"isMetaMaskInstalled\",\n    value: function () {\n      var _isMetaMaskInstalled = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee17() {\n        return _regenerator.default.wrap(function (_context25) {\n          while (1) {\n            switch (_context25.prev = _context25.next) {\n              case 0:\n                _context25.next = 2;\n                return (0, _detectProvider.default)();\n\n              case 2:\n                if (!_context25.sent) {\n                  _context25.next = 6;\n                  break;\n                }\n\n                _context25.t0 = true;\n                _context25.next = 7;\n                break;\n\n              case 6:\n                _context25.t0 = false;\n\n              case 7:\n                return _context25.abrupt(\"return\", _context25.t0);\n\n              case 8:\n              case \"end\":\n                return _context25.stop();\n            }\n          }\n        }, _callee17);\n      }));\n\n      return function () {\n        return _isMetaMaskInstalled.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"switchNetwork\",\n    value: function () {\n      var _switchNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee18(chainId) {\n        var currentNetwork;\n        return _regenerator.default.wrap(function (_context26) {\n          while (1) {\n            switch (_context26.prev = _context26.next) {\n              case 0:\n                chainId = verifyChainId(chainId); // Check if the user wallet is already on `chainId`\n\n                _context26.t0 = fromDecimalToHex;\n                _context26.next = 4;\n                return this.getChainId();\n\n              case 4:\n                _context26.t1 = _context26.sent;\n                currentNetwork = (0, _context26.t0)(_context26.t1);\n\n                if (!(currentNetwork === chainId)) {\n                  _context26.next = 8;\n                  break;\n                }\n\n                return _context26.abrupt(\"return\");\n\n              case 8:\n                _context26.next = 10;\n                return window.ethereum.request({\n                  method: 'wallet_switchEthereumChain',\n                  params: [{\n                    chainId: chainId\n                  }]\n                });\n\n              case 10:\n              case \"end\":\n                return _context26.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      return function () {\n        return _switchNetwork.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"addNetwork\",\n    value: function () {\n      var _addNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee19(chainId, chainName, currencyName, currencySymbol, rpcUrl, blockExplorerUrl) {\n        return _regenerator.default.wrap(function (_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                chainId = verifyChainId(chainId);\n                _context27.next = 3;\n                return window.ethereum.request({\n                  method: 'wallet_addEthereumChain',\n                  params: [{\n                    chainId: chainId,\n                    chainName: chainName,\n                    nativeCurrency: {\n                      name: currencyName,\n                      symbol: currencySymbol,\n                      decimals: 18\n                    },\n                    rpcUrls: [rpcUrl],\n                    blockExplorerUrls: [blockExplorerUrl]\n                  }]\n                });\n\n              case 3:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee19);\n      }));\n\n      return function () {\n        return _addNetwork.apply(this, arguments);\n      };\n    }()\n  }]);\n  return MoralisWeb3;\n}();\n\n(0, _defineProperty2.default)(MoralisWeb3, \"speedyNodeApiKey\", void 0);\n(0, _defineProperty2.default)(MoralisWeb3, \"memoryCard\", {\n  save: function (what) {\n    this.saved = what;\n  },\n  get: function (where) {\n    if (!this.saved) throw new Error('Nothing saved to memory card'); // In case the saved data is not an object but a simple string or number\n\n    if (where.length === 0) return this.getSaved();\n    var tmp;\n    var savedTmp = this.saved;\n\n    for (var i = 0; i < where.length; i++) {\n      tmp = savedTmp[where[i]];\n      savedTmp = tmp;\n    }\n\n    return savedTmp;\n  },\n  getSaved: function () {\n    return this.saved;\n  },\n  deleteSaved: function () {\n    this.saved = undefined;\n  }\n});\n\nfunction fromDecimalToHex(number) {\n  if (typeof number !== 'number') throw 'The input provided should be a number';\n  return \"0x\".concat(number.toString(16));\n}\n\nfunction verifyChainId(chainId) {\n  // Check if chainId is a number, in that case convert to hex\n  if (typeof chainId === 'number') chainId = fromDecimalToHex(chainId);\n  return chainId;\n}\n\nMoralisWeb3.onConnect = (0, _bind.default)(_context28 = MoralisWeb3.on).call(_context28, MoralisWeb3, EthereumEvents.CONNECT);\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context29 = MoralisWeb3.on).call(_context29, MoralisWeb3, EthereumEvents.DISCONNECT);\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context30 = MoralisWeb3.on).call(_context30, MoralisWeb3, EthereumEvents.CHAIN_CHANGED);\nMoralisWeb3.onAccountsChanged = (0, _bind.default)(_context31 = MoralisWeb3.on).call(_context31, MoralisWeb3, EthereumEvents.ACCOUNTS_CHANGED);\nvar _default = MoralisWeb3;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}